/* Copyright (C) 2012-2013 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.1.8 gitCommitId 126270c785bec07726c84e2af6595114f502eb4d (util,controller,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage) */
(function(b){function c(b,c,n){var v=null,i=ab[b],x=fb[b];x&&(v=x(b,i,c,n));!v&&i&&(v=e.u.str.format.apply(null,[i].concat(c)));v&&(v+="(code="+b+")");c=v?Error(v):Error("FwError: code = "+b);b&&(c.code=b);n&&(c.detail=n);throw c;}function da(b,c,n){var v=null,i=ab[b];i&&(c=[i].concat(c),v=e.u.str.format.apply(null,c));return{code:b,message:v,detail:n}}function J(c){return null==c?c:b.isArray(c)?c:[c]}function U(b){var c=document.createElement("span");c.innerHTML='<a href="'+b+'" />';return c.firstChild.href}
function x(b){return"string"===typeof b}function wa(b){return b.isRejected?b.isRejected():"rejected"===b.state()}function xa(b){return b.isResolved?b.isResolved():"resolved"===b.state()}function fa(b){return!x(b)?!1:!!b.match(/^[A-Za-z_\$][\w|\$]*$/)}function ma(c){if("regexp"===b.type(c))return c;var e="",e=-1!==c.indexOf("*")?b.map(c.split("*"),function(b){return b.replace(/\W/g,"\\$&")}).join(".*"):c;return RegExp("^"+e+"$")}function na(b,c,e){b&&(b._h5UnwrappedCall?b._h5UnwrappedCall(c,e):b[c](e))}
var bb=void 0;if(window.h5){if(window.h5.env&&"1.1.8"===window.h5.env.version)return;bb=window.h5}var e={};window.h5=e;e.coexist=function(){window.h5=bb;return e};e.env={version:"1.1.8"};var ab={},fb={},cb={controllerInternal:null},db;(function(){function s(b){switch(b){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";
case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case B:return"u";case "undefElem":return"_";case "objElem":return"@"}}function z(b,a){if(x(b)){var d=b;a&&(d=d.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return d=d.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return b instanceof String?new String(z(b.toString())):b}function n(b,a){return"1"===a?b:x(b)?b.replace(/\\\\/g,"\\-").replace(/\\b/g,
"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):b instanceof String?new String(n(b.toString())):b}function v(b,a,d){var c=e.async.deferred();e.ajax({url:b,async:a,cache:d,dataType:"script",converters:{"text script":function(b){return b}}}).done(function(){var b=E(arguments);b.push(this.url);c.notifyWith(c,b);c.resolveWith(c,b)}).fail(function(){c.rejectWith(c,E(arguments))});return c.promise()}function i(b){x(b)||c(h,"h5.u.obj.ns()");for(var b=
b.split("."),a=b.length,d=0;d<a;d++)fa(b[d])||c(h,"h5.u.obj.ns()");for(var f=window,d=0;d<a;d++){var D=b[d];void 0===f[D]&&(f[D]={});f=f[D]}return f}function F(b,a){var d=i(b),f;for(f in a)a.hasOwnProperty(f)&&(void 0!==d[f]&&c(A,[b,f]),d[f]=a[f])}function E(b){return Array.prototype.slice.call(b)}var B="undefined",h=11E3,A=11001,f=11004,p=11005,a=11006,r={},l={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&apos;"},K=void 0!==document.createElement("script").onload,d=-1===/\r\n/.toString().indexOf("\r\n");
F("h5.u",{loadScript:function(a,d){var f=e.async.deferred,B=J(a);(!B||0===B.length)&&c(11007);for(var D=0,H=B.length;D<H;D++)a=B[D],(!x(a)||!b.trim(a))&&c(11007);null!=d&&!b.isPlainObject(d)&&c(11008,"h5.u.loadScript()");var t=d&&!1===d.async?!1:!0,l=!!(d&&!0===d.force),D=!!(d&&!0===d.parallel),s=!!(d&&!0===d.atomic),p=!l,h=t?f():null,n=t?function(b){h.reject(da(11010,[b]))}:null,H=t?function(){var b=f();setTimeout(function(){b.resolve([])},0);return b.promise()}:null,i=D?[]:null,A=[],z={};if(t){if(!s&&
K){var F=b("head"),$=function(b){var g=f(),a=document.createElement("script");a.onload=function(){a.onload=null;r[b]=b;g.resolve()};a.onerror=function(){a.onerror=null;g.reject(b)};a.type="text/javascript";a.src=p?b:b+(-1<b.indexOf("?")?"&_":"?_")+ +new Date;F[0].appendChild(a);return g.promise()};if(D)i.push(H()),b.each(B,function(){var b=U(this);if(!l&&b in r)return!0;i.push($(b))}),e.async.when(i).then(function(){h.resolve()},n);else{var R=f().resolve().pipe(H);b.each(B,function(){var b=U(this);
R=R.pipe(function(){if(l||!(b in r))return $(b)},n)});R.pipe(function(){h.resolve()},n)}}else if(D){var O=[];i.push(H());O.push(null);b.each(B,function(){var b=U(this);if(!l&&(b in r||b in z))return!0;i.push(v(b,t,p));s?z[b]=b:O.push(null)});D=B=null;s?(B=function(){b.each(E(arguments),function(a,g){b.globalEval(g[0])});b.extend(r,z);h.resolve()},D=b.noop):(B=function(){h.resolve()},D=function(){for(var a=E(arguments),g=0;g<O.length;g++)if(a[g]){var o=a[g][3];O[g]!==o&&(b.globalEval(a[g][0]),O.splice(g,
1,o))}});e.async.when(i).then(B,n,D)}else R=f().resolve().pipe(H),b.each(B,function(){var a=U(this);R=R.pipe(function(){var g=f();!l&&(a in r||a in z)?g.resolve():v(a,t,p).then(function(o){s?(A.push(o),z[a]=a):(b.globalEval(o),r[a]=a);g.resolve()},function(){g.reject(this.url)});return g.promise()},n)}),R.pipe(function(){s&&(b.each(A,function(a,g){b.globalEval(g)}),b.extend(r,z));h.resolve()},n);return h.promise()}b.each(B,function(){var a=U(this);if(!l&&(a in r||a in z))return!0;v(a,t,p).then(function(g){s?
(A.push(g),z[a]=a):(b.globalEval(g),r[a]=a)},function(){c(11010,[a])})});s&&(b.each(A,function(a,g){b.globalEval(g)}),b.extend(r,z))},createInterceptor:function(a,d){return function(c){var f={},D=a?a.call(this,c,f):c.proceed();c.result=D;if(!d)return D;if(D&&b.isFunction(D.promise)){var H=this;na(D,"always",function(){d.call(H,c,f)});return D}d.call(this,c,f);return D}}});F("h5.u.str",{startsWith:function(b,a){return 0===b.lastIndexOf(a,0)},endsWith:function(b,a){var d=b.length-a.length;return 0<=
d&&b.lastIndexOf(a)===d},format:function(b,a){if(null==b)return"";var d=arguments;return b.replace(/\{(\d+)\}/g,function(b,a){var c=d[parseInt(a,10)+1];return typeof c===B?B:c})},escapeHtml:function(a){return"string"!==b.type(a)?a:a.replace(/[&"'<>]/g,function(b){return l[b]})}});F("h5.u.obj",{expose:F,ns:i,serialize:function(a){function f(b){for(var a=0,d=D.length;a<d;a++)if(b===D[a])return!0;return!1}function r(b){for(var a=0,d=D.length;a<d;a++)b===D[a]&&D.splice(a,1)}function l(a){var t=a,j=b.type(a);
"object"===typeof a&&(a instanceof String?j="String":a instanceof Number?j="Number":a instanceof Boolean&&(j="Boolean"));switch(j){case "String":case "string":t=s(j)+z(t);break;case "Boolean":t=t.valueOf();case "boolean":t=s(j)+(t?1:0);break;case "Number":t=t.valueOf();if(b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a))t=Infinity===a.valueOf()?s("infinity"):-Infinity===a.valueOf()?s("-infinity"):s("nan");t=s(j)+t;break;case "number":t=b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a)?Infinity===
a?s("infinity"):-Infinity===a?s("-infinity"):s("nan"):s(j)+t;break;case "regexp":t=s(j)+z(t.toString(),d);break;case "date":t=s(j)+ +t;break;case "array":f(a)&&c(ERR_CODE_REFERENCE_CYCLE);D.push(a);for(var e=[],t=s(j)+"[",j=0,h=a.length;j<h;j++){e[j.toString()]=!0;var n;n=a.hasOwnProperty(j)?"function"===b.type(a[j])?s(B):l(a[j]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):s("undefElem");t+='"'+n+'"';j!==a.length-1&&(t+=",")}var j="",i;for(i in a)e[i]||"function"!==b.type(a[i])&&(j+='"'+z(i)+'":"'+
l(a[i]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');j&&(t+=(a.length?",":"")+'"'+s("objElem")+"{"+j.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),t=t.replace(/,$/,""),t+='}"');t+="]";r(a);break;case "object":f(a)&&c(p);D.push(a);t=s(j)+"{";for(i in a)a.hasOwnProperty(i)&&"function"!==b.type(a[i])&&(t+='"'+i+'":"'+l(a[i]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');t=t.replace(/,$/,"");t+="}";r(a);break;case "null":case B:t=s(j)}return t}b.isFunction(a)&&c(11002);var D=[];return"2|"+l(a)},deserialize:function(d){function r(d){function j(b){switch(b){case "s":return"string";
case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return B;case "_":return"undefElem";case "@":return"objElem"}}d.match(/^(.)(.*)/);d=RegExp.$1;e=RegExp.$2?RegExp.$2:"";if(void 0!==d&&""!==d)switch(j(d)){case "String":e=new String(n(e,
l));break;case "string":break;case "Boolean":"0"===e||"1"===e?e=new Boolean("1"===e):c(a);break;case "boolean":"0"===e||"1"===e?e="1"===e:c(a);break;case "nan":""!==e&&c(a);e=NaN;break;case "infinity":""!==e&&c(a);e=Infinity;break;case "-infinity":""!==e&&c(a);e=-Infinity;break;case "Number":"infinity"===j(e)?e=new Number(Infinity):"-infinity"===j(e)?e=new Number(-Infinity):"nan"===j(e)?e=new Number(NaN):(e=new Number(e),isNaN(e.valueOf())&&c(a));break;case "number":e=(new Number(e)).valueOf();isNaN(e)&&
c(a);break;case "array":var t;try{t=b.parseJSON(e)}catch(p){c(a)}b.isArray(t)||c(a);for(var h=0;h<t.length;h++)switch(j(t[h].substring(0,1))){case "undefElem":delete t[h];break;case "objElem":for(var i=r(s("object")+t[h].substring(1)),d=[],h=0,A=t.length-1;h<A;h++)d[h]=t[h];t=d;for(var v in i)t[v]=i[v];break;default:t[h]=r(t[h])}e=t;break;case "object":try{t=b.parseJSON(e)}catch(K){c(a)}b.isPlainObject(t)||c(a);for(v in t)t[v]=r(t[v]);e=t;break;case "date":e=new Date(parseInt(e,10));break;case "regexp":try{h=
e.match(/^\/(.*)\/(.*)$/),i=n(h[1],l),e=RegExp(i,h[2])}catch(z){c(a)}break;case "null":""!==e&&c(a);e=null;break;case B:""!==e&&c(a);e=void 0;break;default:c(f)}return n(e,l)}x(d)||c(11009);d.match(/^(.)\|(.*)/);var l=RegExp.$1;"1"!==l&&"2"!==l&&c(11003,[l,"2"]);var e=RegExp.$2;return r(e)},isJQueryObject:function(a){return!a||!a.jquery?!1:a.jquery===b().jquery},argsToArray:E,getByPath:function(b){x(b)||c(h,"h5.u.obj.getByPath()");b=b.split(".");"window"===b[0]&&b.unshift();for(var a=window,d=0,f=
b.length;d<f&&!(a=a[b[d]],null==a);d++);return a}})})();(function(){var s,z,n,v,i,F,E;function B(b){return b.match(/^error$/i)?s:b.match(/^warn$/i)?z:b.match(/^info$/i)?n:b.match(/^debug$/i)?v:b.match(/^trace$/i)?i:b.match(/^all$/i)?F:b.match(/^none$/i)?E:null}function h(a,d){var c={};if(b.isArray(a)){var f=a.slice(0,3).join(" <- ");0<a.slice(3).length&&(f+=" ...");c.recent=f;c.all=d.join("\n")}else c.recent=a,c.all=d;return c}function A(b){var a="";b.name?a=b.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(b.toString()),
a=RegExp.$1);return a}function f(a){for(var a=e.u.obj.argsToArray(a),d=[],c=0,f=a.length;c<f;c++)d.push(b.type(a[c]));return d.join(", ")}function p(){}function a(a){(!x(a)||0===b.trim(a).length)&&c(d);this.category=b.trim(a)}var r=10002,l=10003,K=10004,d=10005,j=10007,u=10008,L=10010;s=50;z=40;n=30;v=20;i=10;F=0;E=-1;var G=null;p.prototype={init:function(){},log:function(b){window.console&&(x(b.args[0])?this._logMsg(b):this._logObj(b))},_logMsg:function(b){var a=b.args,d=null,d=1===a.length?a[0]:
e.u.str.format.apply(e.u.str,a),a=this._getLogPrefix(b)+d;b.logger.enableStackTrace&&(a+="  ["+b.stackTrace.recent+"]");b.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(a):this._consoleOut(b.level,a);b.logger.enableStackTrace&&this._consoleOut(b.level,b.stackTrace.all);b.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(b,a){var d=!1;b==s&&console.error?(console.error(a),d=!0):b==z&&console.warn?(console.warn(a),d=!0):b==n&&console.info?(console.info(a),
d=!0):b==v&&console.debug&&(console.debug(a),d=!0);!d&&console.log&&console.log(a)},_getLogPrefix:function(b){return"["+b.levelString+"]"+b.date.getHours()+":"+b.date.getMinutes()+":"+b.date.getSeconds()+","+b.date.getMilliseconds()+": "},_logObj:function(b){var a=b.args,d=this._getLogPrefix(b);a.unshift(d);b.level==s&&console.error?this._output(console.error,a):b.level==z&&console.warn?this._output(console.warn,a):b.level==n&&console.info?this._output(console.info,a):b.level==v&&console.debug?this._output(console.debug,
a):this._output(console.log,a)},_output:function(b,a){b.apply?b.apply(console,a):b(a)}};a.prototype={enableStackTrace:!1,maxStackSize:10,error:function(b){this._log(s,arguments,this.error)},warn:function(b){this._log(z,arguments,this.warn)},info:function(b){this._log(n,arguments,this.info)},debug:function(b){this._log(v,arguments,this.debug)},trace:function(b){this._log(i,arguments,this.trace)},_traceFunctionName:function(a){var d=Error(),c=d.stack||d.stacktrace,d=[],e={};if(c)var d=c.replace(/\r\n/,
"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),j=null,d=b.map(d,function(a){return j=0===a.length?null:""===b.trim(a)?"{anonymous}":b.trim(a)}),e=h(d.slice(3,d.length),d.slice(0,this.maxStackSize));else if(a=a.caller,c=0,a)for(;;){var B=f(a.arguments),r=A(a);r?d.push("{"+r+"}("+B+")"):a.caller?d.push("{anonymous}("+B+")"):d.push("{root}("+B+")");if(!a.caller||c>=this.maxStackSize){e=h(d,d);break}a=a.caller;
c++}else h("{unable to trace}","{unable to trace}");return e},_log:function(b,a,d){var a={level:b,args:e.u.obj.argsToArray(a),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},c=G.out,f=G.defaultOut,d=null;if(c)for(var c=J(c),j=0,B=c.length;j<B;j++){var r=c[j];if(r.compiledCategory.test(this.category)){d=r;break}}d||(d=f);j=d.compiledLevel;d=d.compiledTargets;if(!(b<j||0>j))if(a.logger=this,a.date=new Date,a.levelString=this._levelToString(b),d&&0!==d.length){j=0;for(B=d.length;j<B;j++)d[j].log(a)}},
_levelToString:function(b){if(b===s)return"ERROR";if(b===z)return"WARN";if(b===n)return"INFO";if(b===v)return"DEBUG";if(b===i)return"TRACE"}};e.u.obj.expose("h5.log",{createLogger:function(b){return new a(b)},configure:function(){function a(e,h,s){var p=null==s;if(!p){var i=h.category;(!x(i)||0===b.trim(i).length)&&c(L);i=b.trim(i);-1!==b.inArray(i,f)&&c(r,h.category);h.compiledCategory=ma(i);f.push(i)}i=null==h.level?B(p?d.level:s.level):x(h.level)?B(b.trim(h.level)):h.level;"number"!==typeof i&&
c(l,h.level);h.compiledLevel=i;var i=[],n=h.targets;if(!p||null!=n){var v=[];null==n||b.isArray(n)||x(n)&&b.trim(n).length||c(u);for(var n=J(n),A=0,g=n.length;A<g;A++){null==n[A]||x(n[A])&&b.trim(n[A]).length||c(u);var o=n[A];if(o){-1!==b.inArray(o,v)&&c(j,o);var q=e[o];q||c(K,o);v.push(o);i.push(q.compiledTarget)}}if(!p&&(e=s.targets,null!=e)){e=J(e);A=0;for(g=e.length;A<g;A++)o=e[A],-1===b.inArray(o,v)&&(i.push(s.compiledTargets[A]),v.push(o))}}h.compiledTargets=i}var d={level:"NONE",targets:null},
f=[];G=b.extend(!0,{},e.settings.log?e.settings.log:{defaultOut:d});var h=G.target;h||(h={},G.target=h);(function(a){b.isPlainObject(a)||c(10009);for(var d in a){var f=a[d];b.type(f.type)!=="object"&&f.type!=="console"&&c(1E4);var e=null,e=f.type==="console"?new p:b.extend(true,{},f.type);e.init&&e.init(f);f.compiledTarget=e}a.console={type:"console",compiledTarget:new p}})(h);var s=G.defaultOut;s||(s=d,G.defaultOut=s);a(h,s);var i=G.out;if(i)for(var i=J(i),n=0,v=i.length;n<v;n++)a(h,i[n],s)}})})();
(function(){function c(s){e.settings.aspects=b.map(J(s),function(b){b.target&&(b.compiledTarget=ma(b.target));b.pointCut&&(b.compiledPointCut=ma(b.pointCut));return b})}e.u.obj.ns("h5.settings");e.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(b){b=b.status;if("POST"===this.type||!(0===b||12029===b))return!1}}};var z=e.u.createInterceptor(function(b,c){this.log.info("{0}.{1}が開始されました。",
this.__name,b.funcName);this.log.info(b.args);c.start=new Date;return b.proceed()},function(b,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,b.funcName,e)});e.u.obj.expose("h5.core.interceptor",{lapInterceptor:z,logInterceptor:z,errorInterceptor:function(c){var s=null;try{s=c.proceed()}catch(i){e.settings.commonFailHandler&&b.isFunction(e.settings.commonFailHandler)&&e.settings.commonFailHandler.call(null,i)}return s}});b(document).trigger("h5preinit");
e.settings.aspects&&c(e.settings.aspects);e.log.configure()})();(function(){e.u.obj.expose("h5.env",{ua:function(c){var e=!!c.match(/iPhone/i),n=!!c.match(/iPad/i),v=e||n,i=!!c.match(/android/i),x=!!c.match(/Windows Phone/i),E=!!c.match(/MSIE/),B=!!c.match(/Firefox/i),h=!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),A=!i&&!!c.match(/Safari/i)&&!h,f=!!c.match(/Webkit/i),p=!!c.match(/Opera/i),a=i&&!!c.match(/Safari/i)&&!h,r=!(!e&&!x&&!(a&&c.match(/Mobile/)&&!c.match(/SC-01C/)||i&&h&&c.match(/Mobile/)||
c.match(/Fennec/i)||c.match(/Opera Mobi/i))),l=!(!n&&!(a&&!c.match(/Mobile/)||i&&h&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),K=!r&&!l,d=null,j=null,u=function(a,d){return b.trim(c.substring(c.indexOf(a)+a.length,c.indexOf(d))).split("_")},L=function(a,d){var f=b.trim(c.match(!1===d?RegExp(a+"[^;)]*"):RegExp(a+"[^;)]*","i"))).split(" ");return 1===f.length?"":f[f.length-1]},G=function(a,d){var f=b.trim(c.match(!1===d?RegExp(a+"[^;) ]*"):RegExp(a+"[^;) ]*",
"i"))).split("/");return 1===f.length?"":f[f.length-1]};if(e)j=u("iPhone OS","like"),d=parseInt(j[0]),j=j.join(".");else if(n)j=u("CPU OS","like"),d=parseInt(j[0]),j=j.join(".");else if(!i||!B)i?(j=L("Android"),d=parseInt(j.split(".")[0])):x&&((j=L("Windows Phone OS"))||(j=L("Windows Phone")),d=parseInt(j.split(".")[0]));E&&p&&(E=!1);var D=u=null;if(v||i&&a)u=d,D=j;else{var H=null;E?H=L("MSIE",!1):h?(H=G("Chrome",!1))||(H=G("CrMo",!1)):A?H=G("Version"):B?H=G("Firefox"):p&&((H=G("Version"))||(H=G("Opera")),
H||(H=L("Opera")));H&&(u=parseInt(H.split(".")[0]),D=H)}return{osVersion:d,osVersionFull:j,browserVersion:u,browserVersionFull:D,isiPhone:e,isiPad:n,isiOS:v,isAndroid:i,isWindowsPhone:x,isIE:E,isFirefox:B,isChrome:h,isSafari:A,isOpera:p,isAndroidDefaultBrowser:a,isSmartPhone:r,isTablet:l,isDesktop:K,isWebkit:f}}(navigator.userAgent)})})();(function(){function s(c){function e(){n=!0;f=this;p=i(arguments);if(wa(c)||xa(c))return c;var r=i(arguments);if(0<a.length)for(var h=0,s=a.length;h<s;h++){var d=
r;d!==arguments&&(d=J(d));b.isFunction(a[h])&&a[h].apply(this,d)}return c}var n=!1,f=null,p=null,a=[];c.progress=function(){for(var e=i(arguments),h=0,s=e.length;h<s;h++){var d=e[h];if(b.isArray(d))c.progress.apply(this,d);else if(b.isFunction(d))if(n){var j=p;j!==p&&(j=J(j));d.apply(f,j)}else a.push(d)}return this};c.notify=e;c.notifyWith=function(b,a){return!a?e.apply(b):e.apply(b,a)}}function z(c){if(!c)return!1;for(var c=J(c),e=0,i=c.length;e<i;e++)if(b.isFunction(c[e]))return!0;return!1}function n(c,
h){function A(b){h?h[b]&&(c[b]=h[b]):(l[b]=c[b],c[b]=function(){return function(){if(!a){var d=i(arguments);if("then"===b||"pipe"===b)d=d[1];z(d)&&(a=!0)}return c._h5UnwrappedCall.call(this,b,i(arguments))}}(b),K[b]=c[b])}function f(b){return function(){var d=e.settings.commonFailHandler;!a&&d&&!r&&(c.fail.call(this,d),r=!0);return b.apply(this,arguments)}}var p=!!c.progress;!p&&!E(c)?s(c):h&&(c.progress=h.progress);var a=!1,r=!1,l={},K={};c._h5UnwrappedCall=h?h._h5UnwrappedCall:function(a,d){d=J(d);
b.extend(c,l);var f=c[a].apply(this,d);b.extend(c,K);return f};for(var d=0,j=v.length;d<j;d++){var u=v[d];c[u]&&A(u)}if(c.pipe&&!h){var L=c.pipe;c.pipe=function(){var a=n(L.apply(this,arguments));if(p||!b.isFunction(arguments[2]))return a;var d=arguments[2],f=x();a.progress=function(b){f.progress(b)};c.progress(function(){var a=d.apply(this,arguments);!a||!b.isFunction(a.promise)?f.notify.call(this,a):a.progress(function(){f.notify.apply(this,arguments)})});return a};K.pipe=c.pipe}if(c.then&&!h){var G=
c.then;c.then=function(){var b=arguments,a=G.apply(this,b);if(a!==this)return n(a);!p&&z(b[2])&&c.progress.call(c,b[2]);return a};K.then=c.then}c.reject&&(c.reject=h&&h.reject?h.reject:f(c.reject));c.rejectWith&&(c.rejectWith=h&&h.rejectWith?h.rejectWith:f(c.rejectWith));if(c.promise)if(h&&h.promise)c.promise=h.promise;else{var D=c.promise;c.promise=function(){return n(D.apply(this,arguments),c)}}return c}var v=["fail","always","pipe","then"],i=e.u.obj.argsToArray,x=function(){var c=b.Deferred();
return n(c)},E=function(b){return!!b&&b.done&&b.fail&&!b.resolve&&!b.reject};e.u.obj.expose("h5.async",{deferred:x,when:function(){var c=i(arguments);1===c.length&&b.isArray(c[0])&&(c=c[0]);var h=c.length,n=e.async.deferred(),f=n.promise(),p=b.when.apply(b,c).done(function(){n.resolveWith(this&&this.promise&&this.promise()===p?n:this,i(arguments))}).fail(function(){n.rejectWith(this,i(arguments))});if(p.progress)p.progress(function(){n.notifyWith(this===p?f:this,i(arguments))});else{for(var a=[],
r=0;r<h;r++)a[r]=void 0;for(var l=function(b){return function(c){a[b]=1<arguments.length?i(arguments):c;n.notifyWith(f,a)}},r=0;r<h;r++){var s=c[r];s&&b.isFunction(s.promise)&&s.progress&&(1<h?s.progress(l(r)):s.progress(function(){n.notifyWith(f,i(arguments))}))}}return f},isPromise:E,loop:function(e,h,i){b.isArray(e)||c(5E3);var f=x(),p="number"===b.type(i)?i:20,a=!1,r=0,l=e.length,n,d=null,j=function(){if(r===l)f.resolve(e);else if(a)f.reject(e);else{var b=h.call(e,r,e[r],d);r++;E(b)?b.done(function(){n()}).fail(function(){a=
!0;n()}):n()}},s=function(){setTimeout(function(){var b=r-1;0<r&&f.notify({data:e,index:b,value:e[b]});j()},0)},v=!1;n=function(){v||(0===r%p?s():j())};var z=!1,d={resume:function(){!z&&v&&(v=!1,n())},pause:function(){v=!0},stop:function(){z=!0;f.resolve(e)}};s();return f.promise()}})})();(function(){function c(b,e){for(var h=0,n=i.length;h<n;h++){var f=i[h];b[f]&&(e[F[f]](b[f]),b[f]=void 0)}}function z(c,e,h){for(var i in e)if(e.hasOwnProperty(i)&&(h||!b.isFunction(e[i]))&&-1===b.inArray(i,v))c[i]=
e[i]}function n(b,c){z(this,b,!0);c.promise(this);var e=this.always;this.always=function(){e.apply(this,arguments);return this}}var v=["error","success","complete"],i=["error","success","complete"],F={success:"done",error:"fail",complete:"always"};e.u.obj.expose("h5",{ajax:function(){function i(b,c,e){z(p,e);f.resolveWith(this,arguments)}function v(a,c,e){if(0===h.retryCount||!1===h.retryFilter.apply(this,arguments))z(p,a),f.rejectWith(this,arguments);else if(h.retryCount--,this.async){var n=this;
setTimeout(function(){b.ajax(n).done(i).fail(v)},h.retryInterval)}else b.ajax(this).done(i).fail(v)}var h={},A=arguments;x(A[0])?(b.extend(h,A[1]),h.url=A[0]):b.extend(h,A[0]);var h=b.extend({},e.settings.ajax,h),f=e.async.deferred();c(h,f);var A=b.ajax(h),p=new n(A,f);A.done(i).fail(v);return p}})})();(function(){function s(b,a,g,m,c){this.controller=b;this.event=a;this.evArg=g;this.selector=m;this.selectorType=c}function z(b){return!this.__controllerContext.executeListeners?void 0:b.proceed()}function n(b,
a,g){var m=v(b.__name,a);g&&m.push(z);return i(b[a],a,m)}function v(a,g){var m=[],c=e.settings.aspects;if(!c||0===c.length)return m;for(var c=J(c),d=c.length-1;-1<d;d--){var o=c[d];if(!o.target||o.compiledTarget.test(a)){var k=o.interceptors;if(!o.pointCut||o.compiledPointCut.test(g))if(b.isArray(k))for(o=k.length-1;-1<o;o--)m=m.concat(k[o]);else m.push(k)}}return m}function i(b,a,g){for(var m=function(b,a,P){return function(){var g=this;return P.call(g,{target:g,func:b,funcName:a,args:arguments,
proceed:function(){return b.apply(g,this.args)}})}},c=0,d=g.length;c<d;c++)b=m(b,a,g[c]);return b}function F(b){return!!b.match(/^\{.*\}$/)}function E(b){return!!b.match(/^\[.*\]$/)}function B(a){return b.trim(a.substring(1,a.length-1))}function h(a){return b.trim(a.substring(1,a.length-1))}function A(b){for(var a=["window","document","navigator"],g=0,m=a.length;g<m;g++){var c=a[g];if(b===c||ba(b,c+"."))return Ra(b)}return b}function f(a){var g=function(a,P){for(var m in a)if(0<=b.inArray(a,P)||sa(m,
Sa)&&g(a[m],P.concat([a])))return!0;return!1};return g(a,[])}function p(a){var g=function(a,P){for(var m in a)if(0<=b.inArray(a,P)||sa(m,za)&&g(a[m],P.concat([a])))return!0;return!1};return g(a,[])}function a(a,g){var m=a[g];return sa(g,Sa)&&"rootController"!==g&&"parentController"!==g&&!b.isFunction(m)&&m&&!m.__controllerContext.isRoot}function r(g,m,c){var d=[],o=[],k=function(g){o.push(g);for(var P in g)if(a(g,P)){var e=g[P],f=c?e.__controllerContext[m]:e[m];f&&d.push(f);-1===b.inArray(e,o)&&k(e)}};
k(g);return d}function l(b){var g=function(b){var m=b.__meta,P={};if(m)for(var c in m)!1===m[c].useHandlers&&(P[c]=1);for(c in b)m=b[c],a(b,c)&&(g(m),P[c]||K(m))};g(b)}function K(a){var g=a.__controllerContext.bindMap,m;for(m in g)for(var c in g[m]){var d=a,o=m,k=c,e=d.__controllerContext.bindMap[o][k],f=k,q=E(k);q&&(f=h(k));var I=null;switch(f){case "mousewheel":I=ga(d,o,f,e);break;case oa:case Aa:case ha:I=Z(d,o,k,e);break;default:I=Y(d,o,f,e)}if(b.isArray(I)){d=0;for(o=I.length;d<o;d++)j(I[d],
q)}else j(I,q)}}function d(a){var g=a.controller.rootElement,m=a.selector,c=a.eventName,d=a.handler,o=E(c),c=o?h(c):c;if(F(m)){var k=B(m),m=!1;k===Ea?m=!0:g=A(k);m||o||!x(g)?(a.evSelectorType=Fa.SELECTOR_TYPE_OBJECT,b(g).bind(c,d)):(a.evSelectorType=Fa.SELECTOR_TYPE_GLOBAL,b(document).delegate(g,c,d));a.evSelector=g}else a.evSelectorType=Fa.SELECTOR_TYPE_LOCAL,a.evSelector=m,o?b(m,g).bind(c,d):b(g).delegate(m,c,d)}function j(a,g){g&&(a.eventName="["+a.eventName+"]");var m=a.handler;a.handler=function(){var g=
e.settings.listenerElementType===1?b(arguments[0].currentTarget):arguments[0].currentTarget;m.call(a.controller,$(a,arguments),g)};ra(a.controller,a.selector,a.eventName,a.handler);d(a)}function u(b){var g=function(b){var m=b.__meta,c={};if(m)for(var d in m)!1===m[d].useHandlers&&(c[d]=1);for(d in b)m=b[d],a(b,d)&&(g(m),c[d]||L(m))};g(b)}function L(a){var g=a.rootElement,a=a.__controllerContext.unbindMap,m;for(m in a)for(var c in a[m]){var d=a[m][c],o=E(c),k=o?h(c):c;if(F(m)){var e=B(m),f=!1;e===
Ea?(e=g,f=!0):e=A(e);f||o||!x(e)?b(e).unbind(k,d):b(document).undelegate(e,k,d)}else o?b(m,g).unbind(k,d):b(g).undelegate(m,k,d)}}function G(g,m){g.__controllerContext.executeListeners=m;var c=[],d=function(g){c.push(g);for(var P in g)if(a(g,P)){var o=g[P];o.__controllerContext.executeListeners=m;-1===b.inArray(o,c)&&d(o)}};d(g)}function D(g){var m=[],c=function(g,d,P){g.rootController=d;g.parentController=P;m.push(g);for(var o in g)a(g,o)&&(P=g[o],-1===b.inArray(P,m)&&c(P,d,g))};c(g,g,null)}function H(g,
m){var c=m?"__init":"__ready",d=Q();setTimeout(function(){d.resolve()},0);var o=d.promise(),k=function(d){var f=!0,q;for(q in d)a(d,q)&&(f=!1,k(d[q]));var j=function(){var a=null,o=d.__name;if(d[c])try{a=d[c]({args:d.__controllerContext.args})}catch(k){throw g.rootController&&g.rootController.dispose(arguments),k;}var e=m?N(d):T(d);a&&b.isFunction(a.promise)?a.done(function(){e()}).fail(function(){var b=da(X,o,Ga(arguments));g.rootController&&g.rootController.dispose(b)}):e()};q=m?t(d):r(d,"readyPromise");
m&&f&&q.push(o);e.async.when(q).done(function(){j()}).fail(ka)};k(g)}function t(b){var a=r(b,"initPromise");a.push(b.preinitPromise);return a}function N(b){return function(){if(!M(b)){b.isInit=!0;var a=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preinitDfd;delete b.__controllerContext.initDfd;a.resolveWith(b);b.__controllerContext&&b.__controllerContext.isRoot&&g(b)}}}function T(a){return function(){if(!M(a)){a.isReady=!0;var g=a.__controllerContext.readyDfd;
delete a.__controllerContext.readyDfd;g.resolveWith(a);a.__controllerContext&&a.__controllerContext.isRoot&&a.rootElement&&a.isInit&&a.isReady&&b(a.rootElement).trigger("h5controllerready",a)}}}function S(a,g,m){if(!x(a))return b(a);var d=b.trim(a);F(d)?(a=B(d),m&&(ba(a,"window")||ba(a,"navigator"))&&c(ma),m=b(A(a))):m=b(g).find(a);return m}function ra(b,a,g,m){b.__controllerContext.unbindMap[a]||(b.__controllerContext.unbindMap[a]={});b.__controllerContext.unbindMap[a][g]=m}function Y(b,a,g,m){return{controller:b,
selector:a,eventName:g,handler:m}}function ga(b,a,g,m){return{controller:b,selector:a,eventName:typeof document.onmousewheel===eb?"DOMMouseScroll":g,handler:function(a){var g=a.event;null==g.wheelDelta&&g.originalEvent&&null!=g.originalEvent.wheelDelta&&(g.wheelDelta=g.originalEvent.wheelDelta);null==g.wheelDelta&&g.originalEvent&&null!=g.originalEvent.detail&&(g.wheelDelta=40*-g.originalEvent.detail);m.call(b,a)}}}function Z(a,g,m,c){var d=typeof document.ontouchstart!==eb;if(m!==oa)return d?Y(a,
g,m,c):Y(a,g,m,function(a){var g=a.event,m=b(g.currentTarget).offset()||{left:0,top:0};g.offsetX=g.pageX-m.left;g.offsetY=g.pageY-m.top;c.apply(this,arguments)});var o=function(b,a){for(var g in b)b.hasOwnProperty(g)&&!a[g]&&"target"!==g&&"currentTarget"!==g&&"originalEvent"!==g&&"liveFired"!==g&&(a[g]=b[g]);a.h5DelegatingEvent=b},k=d?"touchstart":"mousedown",e=d?"touchmove":"mousemove",f=d?"touchend":"mouseup",q=b(document);return function(){var j=null,I=!1,ka=function(g,m,c){return function(k){var aa;
a:{switch(g){case "touchstart":case "mousedown":aa=oa;break a;case "touchmove":case "mousemove":aa=Aa;break a;case "touchend":case "mouseup":aa=ha;break a}aa=void 0}var Q=aa===oa;if(!Q||!I){d&&ya(k.event,g);var w=new b.Event(aa);o(k.event,w);var ba=k.event.target;m&&(ba=m);c&&c(w);var h=k.event.originalEvent||k.event;Q&&-1===b.inArray(h,ca)&&(ca=[],pa=[]);var i=b.inArray(h,ca);-1===i&&(i=ca.push(h)-1,pa[i]=!1);if(!pa[i]&&(!d||I||Q))pa[i]=!0,b(ba).trigger(w,k.evArg),I=!0;if(k.event.currentTarget===
document&&(aa===ha&&(ca=[],pa=[]),-1!==b.inArray(h,ca)))ca.splice(i,1),pa.splice(i,1);if(Q&&I){w.h5DelegatingEvent.preventDefault();aa=w.target;var r=w.clientX,X=w.clientY,n=ka(e,aa,function(b){var a=b.clientX,g=b.clientY;b.dx=a-r;b.dy=g-X;r=a;X=g}),y=ka(f,aa),Da=function(b){k.event=b;k.evArg=W(arguments);n(k)},l=function(b){k.event=b;k.evArg=W(arguments);y(k)},p=d?b(aa):q;j=function(){ca=[];pa=[];p.unbind(e,Da);p.unbind(f,l);if(!d&&a.rootElement!==document){b(a.rootElement).unbind(e,Da);b(a.rootElement).unbind(f,
l)}};p.bind(e,Da);p.bind(f,l);!d&&a.rootElement!==document&&(b(a.rootElement).bind(e,Da),b(a.rootElement).bind(f,l))}else aa===ha&&(j(),I=!1)}}},Q=[Y(a,g,m,c)];Q.push({controller:a,selector:g,eventName:k,handler:ka(k)});return Q}()}function ya(a,g){var m=a.originalEvent;if(m){var c="touchend"===g||"touchcancel"===g?m.changedTouches[0]:m.touches[0],d=c.pageX,o=c.pageY;a.pageX=m.pageX=d;a.pageY=m.pageY=o;a.screenX=m.screenX=c.screenX;a.screenY=m.screenY=c.screenY;a.clientX=m.clientX=c.clientX;a.clientY=
m.clientY=c.clientY;c=a.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;if(c=b(c).offset())o-=c.top,a.offsetX=m.offsetX=d-c.left,a.offsetY=m.offsetY=o}}function W(b){return 3>b.length?b[1]:Ga(b).slice(1)}function $(a,g){var m=null,c=null;g&&(m=g[0],c=W(g));var d=m;if(d&&null==d.offsetX&&null==d.offsetY&&d.pageX&&d.pageY){var o=d.target;if(o.ownerSVGElement)o=o.farthestViewportElement;else if(o===window||o===document)o=document.body;if(o=b(o).offset())d.offsetX=
d.pageX-o.left,d.offsetY=d.pageY-o.top}return new s(a.controller,m,c,a.evSelector,a.evSelectorType)}function R(b){for(var g in b){var m=b[g];a(b,g)&&(m.rootElement=null,m.view.__controller=null,R(m))}}function O(b){var g=b.rootElement,m=b.__meta,c;for(c in b){var d=b[c];a(b,c)&&(d.rootElement=m&&m[c]&&m[c].rootElement?V(m[c].rootElement,g,d):g,d.view.__controller=d,O(d))}}function V(a,g,d){null==a&&c(Ha,[d.__name]);!x(a)&&"object"!==typeof a&&c(m,[d.__name]);a=g?S(a,g):b(a);0===a.length&&c(Ia,[d.__name]);
1<a.length&&c(Ja,[d.__name]);return a.get(0)}function g(a){K(a);l(a);var g=a.__controllerContext.managed,m=e.core.controllerManager.controllers;-1===b.inArray(a,m)&&!1!==g&&m.push(a);!1!==g&&b(a.rootElement).trigger("h5controllerbound",a);g=r(a,"initPromise");g.push(a.initPromise);e.async.when(g).done(function(){H(a,!1)}).fail(ka)}function o(b){null===b.rootController&&D(b);O(b);H(b,!0)}function q(b,g){var m=Q();m.resolve();b.__controllerContext.templatePromise=m.promise();b.__controllerContext.initDfd=
Q();b.initPromise=b.__controllerContext.initDfd.promise();b.__controllerContext.readyDfd=Q();b.readyPromise=b.__controllerContext.readyDfd.promise();b.isInit=!1;b.isReady=!1;b.__controllerContext.args=g;for(var c in b)a(b,c)&&q(b[c])}function k(a,g){var m=null,c=g;b.isPlainObject(c)?m=c.target:c={};m=m?S(m,a.rootElement,!0):a.rootElement;return e.ui.indicator.call(a,m,c)}function w(g,m){var c=[],d=[],o=function(g){var k=Q();d.push(g);for(var f in g)if(a(g,f)){var q=g[f];-1===b.inArray(q,d)&&o(q)}g[m]&&
b.isFunction(g[m])&&(g=g[m](),e.async.isPromise(g)&&(g.always(function(){k.resolve()}),c.push(k.promise())))};o(g);return c}function C(g){var m=[],c=function(g){m.push(g);g.view.__view&&g.view.clear();for(var d in g)if(g.hasOwnProperty(d)){if(a(g,d)){var o=g[d];-1===b.inArray(o,m)&&c(o)}g[d]=null}};c(g)}function y(b,a){return a.view.__view.isAvailable(b)?a.view.__view:a.parentController?y(b,a.parentController):e.core.view}function M(b){return!b.__controllerContext||b.__controllerContext.isDisposing}
function Ta(b,g){function m(b,a){var d=b.__controllerContext[o[a]];d&&!wa(d)&&!xa(d)&&d.rejectWith(b,[g]);if(b.parentController)m(b.parentController,a);else if(a<o.length-1)for(var d=0,k=c.length;d<k;d++)m(c[d],a+1)}var c=[],d=function(b){var g=!1,m;for(m in b)a(b,m)&&(g=!0,d(b[m]));g||c.push(b)};d(b);for(var o=["initDfd","readyDfd"],k=0,e=c.length;k<e;k++)m(c[k],0)}function Ka(b,a){for(var g=b.childNodes,m=0,c=g.length;m<c;m++){var d=g[m];if(1===d.nodeType){if(d=Ka(d,a))return d}else if(8===d.nodeType){var o=
d.nodeValue;if(0===o.indexOf(Ba)){var k=o.indexOf("}");if(-1!==k&&(o=o.slice(0,k).match(/id="([A-Za-z][\w-:\.]*)"/))&&o[1]===a)return d}}}return null}function La(b){var a=this;return function(){b.apply(a,arguments)}}function Ma(b){var a=this;return function(){var g=e.u.obj.argsToArray(arguments);g.unshift(this);b.apply(a,g)}}function Na(b){this.__controller=b;Ra("h5.core.view")&&(this.__view=e.core.view.createView())}function la(b,a,g,m){this.__name=a;this.__templates=null;this.rootElement=b;this.__controllerContext=
{executeListeners:!0,isRoot:m,bindMap:{},unbindMap:{}};this.__controllerContext.args=g?g:null;this.isReady=this.isInit=!1;this.readyPromise=this.initPromise=this.preinitPromise=this.parentController=this.rootController=null;this.log=e.log.createLogger(a);this.view=new Na(this)}function U(){this.rootElement=document;this.controllers=[];b(document).bind(Oa,function(b,a){null==a.target&&(a.target=document);a.indicator=k(this,a);b.stopPropagation()})}function fa(a,g,d,k){var q=!k||!k.isInternal,j=g.__name;
(!x(j)||0===b.trim(j).length)&&c(Ca,null,{controllerDefObj:g});d&&!b.isPlainObject(d)&&c(na,[j],{controllerDefObj:g});g.__controllerContext&&c(Ua,null,{controllerDefObj:g});if(q||a)if(null==a)c(Ha,[j],{controllerDefObj:g});else if(x(a)||"object"===typeof a){var I=b(a);0===I.length&&c(Ia,[j],{controllerDefObj:g});1<I.length&&c(Ja,[j],{controllerDefObj:g})}else c(m,[j],{controllerDefObj:g});f(g)&&c(Va,[j],{controllerDefObj:g});p(g)&&c(ia,[j],{controllerDefObj:g});var I=b.extend(!0,{},g),w=new la(a?
b(a).get(0):null,j,d,q),i=g.__templates,ba=Q(),a=ba.promise(),r=Q(),X=r.promise();w.__controllerContext.preinitDfd=r;w.preinitPromise=X;w.__controllerContext.initDfd=Q();w.initPromise=w.__controllerContext.initDfd.promise().fail(ka);w.__controllerContext.readyDfd=Q();w.readyPromise=w.__controllerContext.readyDfd.promise();q||w.readyPromise.fail(ka);if(i&&0<i.length){var y=function(b){Ra("h5.core.view")||c(Pa);w.view.load(i).done(function(){ba.resolve()}).fail(function(a){var g=a.detail.error.status;
b===e.settings.dynamicLoading.retryCount||0!==g&&12029!==g?setTimeout(function(){ba.reject(a)},0):setTimeout(function(){y(++b)},e.settings.dynamicLoading.retryInterval)})};y(0)}else ba.resolve();a.done(function(){M(w)||r.resolveWith(w)}).fail(function(b){r.rejectWith(w,[b]);w.rootController&&w.rootController.dispose(b)});for(var l in I)if(Wa[l])c(Qa,[j,l],{controllerDefObj:g});else if(("__ready"===l||"__construct"===l||"__init"===l)&&b.isFunction(I[l]))w[l]=n(I,l);else if(-1!==l.indexOf(" ")&&b.isFunction(I[l])){a=
b.trim(l);X=a.lastIndexOf(" ");q=b.trim(a.substring(0,X));a=b.trim(a.substring(X+1,a.length));E(a)&&(a="["+b.trim(h(a))+"]");F(q)&&"this"===B(q)&&c(ta,[j],{controllerDefObj:g});X=w.__controllerContext.bindMap;X[q]||(X[q]={});X[q][a]&&c(ua,[j,q,a],{controllerDefObj:g});var ca=n(I,l,!0);X[q][a]=ca;w[l]=ca}else sa(l,Sa)&&I[l]&&!b.isFunction(I[l])?(q=fa(null,b.extend(!0,{},I[l]),d,b.extend({isInternal:!0},k)),w[l]=q):sa(l,za)&&I[l]&&!b.isFunction(I[l])?(q=va(I[l]),w[l]=q):w[l]=b.isFunction(I[l])?n(I,
l):I[l];if(d=w.__meta)for(l in d)q=w[l],void 0===q&&c(ea,[j,l],{controllerDefObj:g}),null===q&&c(Xa,[j,l],{controllerDefObj:g}),la.prototype.constructor!==q.constructor&&c(Ya,[j,l],{controllerDefObj:g});w.__construct&&w.__construct({args:w.__controllerContext.args});if(M(w))return null;k&&"managed"in k&&(w.__controllerContext.managed=k.managed);w.__controllerContext.isRoot&&o(w);return w}function va(a){var g=a.__name;(!x(g)||0===b.trim(g).length)&&c(Za,null,{logicDefObj:a});a.__logicContext&&c($a,
null,{logicDefObj:a});var a=b.extend(!0,{},a),m;for(m in a)a[m]=b.isFunction(a[m])?i(a[m],m,v(a.__name,m)):a[m];a.deferred=Q;a.log=e.log.createLogger(g);a.__logicContext={};a.own=La;a.ownWithOrg=Ma;for(var d in a)a.hasOwnProperty(d)&&sa(d,za)&&(a[d]=va(a[d]));return a}var eb="undefined",Sa="Controller",za="Logic",oa="h5trackstart",Aa="h5trackmove",ha="h5trackend",Ea="rootElement",Oa="triggerIndicator",Ba="{h5view ",ma=6E3,Ha=6001,Ia=6003,Ja=6004,Ca=6006,na=6007,Ua=6008,Va=6009,ia=6010,Qa=6011,ta=
6012,ua=6013,ea=6014,Xa=6015,Ya=6016,Za=6017,$a=6018,Pa=6029,m=6030,X=6033,ka=function(){},Q=e.async.deferred,ba=e.u.str.startsWith,sa=e.u.str.endsWith,I=e.u.str.format,Ga=e.u.obj.argsToArray,Ra=e.u.obj.getByPath,Fa={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},ca=[],pa=[];b.extend(s.prototype,Fa);b.extend(Na.prototype,{get:function(b,a){return y(b,this.__controller).get(b,a)},update:function(b,a,g){b=S(b,this.__controller.rootElement,!0);return y(a,this.__controller).update(b,
a,g)},append:function(b,a,g){b=S(b,this.__controller.rootElement,!0);return y(a,this.__controller).append(b,a,g)},prepend:function(b,a,g){b=S(b,this.__controller.rootElement,!0);return y(a,this.__controller).prepend(b,a,g)},load:function(b){return this.__view.load(b)},register:function(b,a){this.__view.register(b,a)},isValid:function(b){return this.__view.isValid(b)},isAvailable:function(b){return y(b,this.__controller).isAvailable(b)},clear:function(b){this.__view.clear(b)},bind:function(a,g){var m=
a;if(x(a)&&0===a.indexOf("h5view#")){for(var d=Ka(this.__controller.rootElement,a.slice(7)),m=d.nodeValue,m=m.slice(m.indexOf("}")+1),c=b("<div>").append(m),m=[],o=c[0].childNodes,k=0,e=o.length;k<e;k++)m.push(o[k]);c.empty();c=document.createDocumentFragment();k=0;for(e=m.length;k<e;k++)c.appendChild(m[k]);d.parentNode.insertBefore(c,d.nextSibling)}return this.__view.bind(m,g)}});b.extend(la.prototype,{$find:function(a){return b(this.rootElement).find(a)},deferred:function(){return Q()},trigger:function(a,
g){var m=x(a)?b.Event(a):a;b(this.rootElement).trigger(m,g);return m},own:La,ownWithOrg:Ma,bind:function(b,a){this.__controllerContext.isRoot||c(6031);this.rootElement=V(b,null,this);this.view.__controller=this;q(this,a?a:null);o(this);return this},unbind:function(){this.__controllerContext.isRoot||c(6031);w(this,"__unbind");L(this);u(this);this.__controllerContext.unbindMap={};var a=this;e.core.controllerManager.controllers=b.grep(e.core.controllerManager.controllers,function(b){return b!==a});b(this.rootElement).trigger("h5controllerunbound",
this);this.rootElement=null;this.view.__controller=null;R(this)},dispose:function(b){if(!M(this)){Ta(this,b);this.__controllerContext.isDisposing=1;var a=this.deferred();this.unbind();var g=this,b=w(this,"__dispose");e.async.when(b).done(function(){C(g);a.resolve()});return a.promise()}},triggerIndicator:function(a){var g={indicator:null};a&&b.extend(g,a);b(this.rootElement).trigger(Oa,[g]);return g.indicator},indicator:function(b){return k(this,b)},enableListeners:function(){G(this,!0)},disableListeners:function(){G(this,
!1)},throwError:function(b,a){var g=Ga(arguments);g.unshift(null);this.throwCustomError.apply(null,g)},throwCustomError:function(b,a,g){2>arguments.length&&c(6005);var m=null;a&&x(a)?m=Error(I.apply(null,Ga(arguments).slice(1))):(m=Error(),m.detail=a);m.customType=b;throw m;}});b.extend(U.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(a,g){for(var m=g&&g.deep,d=g&&g.name?J(g.name):null,c=b(a)[0],o=this.controllers,k=[],e=0,q=o.length;e<q;e++){var f=o[e];d&&
-1===b.inArray(f.__name,d)||(c===f.rootElement?k.push(f):m&&b.contains(c,f.rootElement)&&k.push(f))}return k}});e.u.obj.expose("h5.core",{controllerManager:new U});var Wa={},qa=new la(null,"a"),ja;for(ja in qa)qa.hasOwnProperty(ja)&&"__name"!==ja&&"__templates"!==ja&&"__meta"!==ja&&(Wa[ja]=1);qa=null;qa=la.prototype;for(ja in qa)qa.hasOwnProperty(ja)&&(Wa[ja]=1);qa=null;cb.controllerInternal=fa;e.u.obj.expose("h5.core",{controller:function(b,a,g){2>arguments.length&&c(6032);return fa(b,a,g)},logic:va,
expose:function(b){var a=b.__name;a||c(6019,null,{target:b});var g=a.lastIndexOf(".");if(-1===g)window[a]=b;else{var m=a.substr(0,g),a=a.substr(g+1,a.length),g={};g[a]=b;e.u.obj.expose(m,g)}}})})();(function(){function s(b){return(b=b.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/))?{elmType:b[1],dataModel:b[2],dimension:b[3]?1:0}:{}}function z(a,g){return function Q(a,m){if(!g[a])return!1;for(var d=0,c=g[a].length;d<c;d++)if(-1<b.inArray(g[a][d],m)||Q(g[a][d],m.concat([a])))return!0;
return!1}(a,[])}function n(b){return"number"===typeof b&&isNaN(b)}function v(b,a){return null==b||n(b)||"number"===typeof b||!a&&(b instanceof Number||!(!(x(b)||b instanceof String)||!b.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function i(b,a){return null==b||"number"===typeof b&&parseInt(b)===b||!a&&(b instanceof Number&&parseInt(b)===parseFloat(b)||("string"===typeof b||b instanceof String)&&!!b.match(/^[+\-]{0,1}[0-9]+$/))}function F(g,d,o,k){"object"!==typeof g&&c($);var e=[];try{if(d){var q=
!1,f;for(f in g)if(g[f]&&!0===g[f].id){if(q&&(e.push(a(Ka)),k))throw null;q=!0}if(!q&&(e.push(a(La)),k))throw null;}var q={},j;for(j in g){var w=null==g[j]?{}:g[j],l=d&&!!w.id;if(!fa(j)&&(e.push(a(Ma,j)),k))throw null;var h=w.depend;if(null!=h){if(l&&(e.push(a(Na,j)),k))throw null;if(w.hasOwnProperty("defaultValue")&&(e.push(a(xa,j)),k))throw null;if(null==h.on){if(e.push(a(la,j)),k)throw null;}else for(var r=J(h.on),y=0,p=r.length;y<p;y++)if(!g.hasOwnProperty(r[y])){e.push(a(la,j));if(k)throw null;
break}if("function"!==typeof h.calc&&(e.push(a(U,j)),k))throw null;q[j]=J(h.on)}var C=w.type;l&&null==C&&(C="string");y={};if(null!=C)if(x(C)){if(l&&"string"!==C&&"integer"!==C&&(e.push(a(Va,j)),k))throw null;y=s(C);if(y.elmType){if(y.dataModel){if(!d&&(e.push(a(va,j,y.dataModel)),k))throw null;if(!o.models[y.dataModel]&&(e.push(a(ma,j,y.dataModel)),k))throw null;}if("enum"===y.elmType&&null==w.enumValue&&(e.push(a(na,j)),k))throw null;}else if(e.push(a(va,j,C)),k)throw null;}else if(e.push(a(da,
j)),k)throw null;var M=w.constraint;if(null!=M)if(b.isPlainObject(M)){for(f in M){var u=M[f];if(null!=u)switch(f){case "notNull":if(!0!==u&&!1!==u){if(e.push(a(oa,j,f)),k)throw null;}else if(l&&!u&&(e.push(a(Ca,j,f,u)),k))throw null;break;case "min":case "max":switch(y.elmType){case "integer":if(x(u)||!i(u)||n(u))if(e.push(a(Aa,j,f)),k)throw null;break;case "number":if(x(u)||x(u)||!v(u)||Infinity===u||-Infinity===u||n(u))if(e.push(a(Aa,j,f)),k)throw null;break;default:if(e.push(a(ha,j,f,y.elmType)),
k)throw null;}break;case "minLength":case "maxLength":switch(y.elmType){case "string":if(x(u)||!i(u)||n(u)||0>u){if(e.push(a(Oa,j,f)),k)throw null;}else if(l&&"maxLength"===f&&0===u&&(e.push(a(Ca,j,f,u)),k))throw null;break;default:if(e.push(a(ha,j,f,y.elmType)),k)throw null;}break;case "notEmpty":switch(y.elmType){case "string":if(!0!==u&&!1!==u){if(e.push(a(oa,j,f)),k)throw null;}else if(l&&!u&&(e.push(a(Ca,j,f,u)),k))throw null;break;default:if(e.push(a(ha,j,f,y.elmType)),k)throw null;}break;case "pattern":switch(y.elmType){case "string":if("regexp"!==
b.type(u)&&(e.push(a(Ea,j,f)),k))throw null;break;default:if(e.push(a(ha,j,f,y.elmType)),k)throw null;}}}if(M.notEmpty&&0===M.maxLength&&(e.push(a(Ba,j,"notEmpty","maxLength")),k))throw null;if(null!=M.min&&null!=M.max&&M.min>M.max&&(e.push(a(Ba,j,"min","max")),k))throw null;if(null!=M.minLength&&null!=M.maxLength&&M.minLength>M.maxLength&&(e.push(a(Ba,j,"minLength","maxLength")),k))throw null;}else if(e.push(a(za,j)),k)throw null;var t=w.enumValue;if(null!=t){if("enum"!==y.elmType&&(e.push(a(wa,
j)),k))throw null;if(!b.isArray(t)||0===t.length||-1<b.inArray(null,t)||-1<b.inArray(void 0,t))if(e.push(a(Ha,j)),k)throw null;}if(l&&w.hasOwnProperty("defaultValue")&&(e.push(a(Ia,j)),k))throw null;}for(var D in q)if(z(D,q)&&(e.push(a(Ua,D)),k))throw null;}catch(A){c(R,null,e)}return!0}function E(b,g,d){var k=[];try{for(var o in b){var e=b[o];if(e&&(e.hasOwnProperty("defaultValue")||!e.type||!("array"===e.type||s(e.type).dimension))&&e.hasOwnProperty("defaultValue")){var f=e.defaultValue;if(g[o](f).length&&
(k.push(a(Ja,o,f)),d))throw null;}}return!0}catch(q){c(R,null,k)}}function B(b,a,g){var d={},c;for(c in b){var k=d,o=c,e;e=g;var q=b[c]||{},j=[],w=null,l=0,w=q.type,i=q.constraint;a&&q.id&&(w=w||"string",i=i||{},i.notNull=!0,"string"===w&&(i.notEmpty=!0));w&&(l=s(w),w=l.elmType,l=l.dimension,j.push(A(w,{manager:e,enumValue:q.enumValue})));q.constraint&&j.push(h(q.constraint));e=f({checkFuncs:j,dimension:l});k[o]=e}return d}function h(b){return function(a){var g=[];b.notNull&&null==a&&g.push({notNull:b.notNull});
b.notEmpty&&!a&&g.push({notEmpty:b.notEmpty});if(null==a)return g;null!=b.min&&a<b.min&&g.push({min:b.min});null!=b.max&&b.max<a&&g.push({max:b.max});null!=b.minLength&&a.length<b.minLength&&g.push({minLength:b.minLength});null!=b.maxLength&&b.maxLength<a.length&&g.push({maxLength:b.maxLength});null!=b.pattern&&!a.match(b.pattern)&&g.push({pattern:b.pattern});return g}}function A(a,g){var d=[{type:a}];switch(a){case "number":return function(b,a){return v(b,a)?[]:d};case "integer":return function(b,
a){return i(b,a)?[]:d};case "string":return function(b,a){return null==b||x(b)||!a&&b instanceof String?[]:d};case "boolean":return function(b,a){return null==b||"boolean"===typeof b||!a&&b instanceof Boolean?[]:d};case "enum":return function(a){var c;a:if(c=g.enumValue,n(a)){for(var a=0,m=c.length;a<m;a++)if(n(c[a])){c=!0;break a}c=!1}else c=null===a||-1<b.inArray(a,c);return c?[]:d};case "any":return function(){return[]}}var c=a.match(/^@(.+?)$/)[1],k=g.manager;return function(b){var a=k.models[c];
return!a||"object"!==typeof b&&null!=b?d:null==b||a.has(b)?[]:d}}function f(a){var g=a.checkFuncs;if(!g||0===g.length)return function(){return[]};var d=a.dimension||0;return function(a,c){function m(a,o){if(!o){for(var f=0,q=g.length;f<q;f++){var j=g[f](a,c);if(j.length)return k=k.concat(j),!1}return!0}if(null==a)return!0;if(!b.isArray(a)&&!e.core.data.isObservableArray(a))return k.push({dimension:d}),!1;f=0;for(q=a.length;f<q;f++)if(!m(a[f],o-1))return!1;return!0}var k=[];m(a,d);return k}}function p(b){return!b?
!1:-1!==b.indexOf("[]")}function a(){var b=arguments[0];if(!DESCRIPTOR_VALIDATION_ERROR_MSGS)return{code:b}}function r(a,g,d,k){function o(g){for(var g=J(a._schema[g].depend.on),d=0,c=g.length;d<c;d++)if(-1===b.inArray(g[d],a._realProperty)&&-1!==b.inArray(g[d],f))return!1;return!0}function e(a,g){for(var d=0,c=g.length;d<c;d++){var m=j[g[d]];if(m)for(var k=0,o=m.length;k<o;k++){var f=m[k];-1===b.inArray(f,a)&&a.push(f)}}}var f=[],j=a._dependencyMap,w={};for(k?f=a._dependProps.slice():e(f,J(d));0!==
f.length;){for(var d=[],k=0,l=f.length;k<l;k++){var i=f[k];if(o(i)){var h=a._schema[i].depend.calc.call(a,g);0!==a._itemValueCheckFuncs[i](h,!0).length&&c(q,[a._model?a._model.name:ia,i,h]);w[i]={oldValue:a._values[i],newValue:h};a._schema[i]&&p(a._schema[i].type)?h?(a._values[i].copyFrom(h),a._nullProps[i]=!1):(a._values[i].copyFrom([]),a._nullProps[i]=!0):a._values[i]=h}else d.push(i)}e(d,f);f=d}return w}function l(a,d,k,o,f){var q=a._model instanceof H?a._model:null,j=a._schema,w=[],l;for(l in d)if(l in
j||c(g,[q?q.name:ia,l]),!(o&&-1!==b.inArray(l,o))){var i=a._values[l],h=d[l];if(j[l]&&j[l].depend){if(i===h)continue;c(V,[q?q.name:ia,l])}var y=j[l]&&j[l].type;p(y)&&(null==h?(h=[],a._nullProps[l]=!0):a._nullProps[l]=!1);if(y&&y.match(/string|number|integer|boolean/)){var C=h;if(b.isArray(C)){for(var C=C.slice(0),h=0,u=C.length;h<u;h++)C[h]=C[h]&&"object"===typeof C[h]?C[h]&&C[h].valueOf&&C[h].valueOf():C[h];h=C}else h=C&&"object"===typeof C&&C.valueOf?C.valueOf():C}-1===b.inArray(l,k)&&(C=a._validateItemValue(l,
h),0<C.length&&c(O,[q?q.name:ia,l],C));if(null!=h&&y&&y.match(/number|integer/)&&"number"!==typeof h)if(b.isArray(h)||e.core.data.isObservableArray(h)){C=0;for(u=h.length;C<u;C++)null!=h[C]&&v(h[C])&&(h[C]=parseFloat(h[C]))}else null!=h&&(h=parseFloat(h));if(!p(y)||!i||!i.equals(h,i))i===h||n(i)&&n(h)||(y&&-1!==y.indexOf("[]")&&e.core.data.isObservableArray(i)&&(i=i.toArray()),w.push({p:l,o:i,n:h}))}if(w.length){d={};k=[];C=0;for(o=w.length;C<o;C++)q=w[C],j[q.p]&&p(j[q.p].type)?q.n&&a._values[q.p].copyFrom(q.n):
a._values[q.p]=q.n,d[q.p]={oldValue:q.o,newValue:a.get(q.p)},k.push(q.p);j={type:!0===f?"create":"change",target:a,props:d};b.extend(d,r(a,j,k,f));return j}}function K(b){var a=b._manager,b=b.name;a._updateLogs||(a._updateLogs={});a._updateLogs[b]||(a._updateLogs[b]={});return a._updateLogs[b]}function d(b,a,g){if(b._manager)for(var d=K(b),c=0,k=g.length;c<k;c++){var o=g[c],e=o._values[b.idKey];d[e]||(d[e]=[]);d[e].push({type:a,item:o})}}function j(b,a){if(b._manager){var g=K(b),d=a.target._values[b.idKey];
g[d]||(g[d]=[]);g[d].push({type:Qa,ev:a})}}function u(g,d){var o=[];try{if(!b.isPlainObject(g))throw o.push(a(k)),null;if(!fa(g.name))throw o.push(a(w)),null;var e=g.base,f=null;if(null!=e){if(!x(e)||0!==e.indexOf("@"))throw o.push(a(C)),null;var q=e.substring(1);if(d.models[q])f=d.models[q].schema;else throw o.push(a(y,q)),null;}var j=g.schema;if(!f&&null==j)throw o.push(a(M)),null;if(!f&&!b.isPlainObject(j))throw o.push(a(Ta)),null;}catch(h){c(Z,null,o)}o=(o=g.base)?d.models[o.slice(1)]._schema:
{};o=b.extend({},o,g.schema);F(o,!0,d,!0);e=B(o,!0,d);E(o,e,!0);return new H(o,g,e,d)}function L(a,g){var d=[],c;for(c in a)d.push(c);c=[];var k=[],o=[],e;for(e in a)a[e]&&a[e].depend?k.push(e):c.push(e),a[e]&&a[e].type&&-1!==a[e].type.indexOf("[]")&&o.push(e);e={};for(var f in a)if(a.hasOwnProperty(f)){var q=a[f]?a[f].depend:null;if(q)for(var q=J(q.on),j=0,w=q.length;j<w;j++){var h=q[j];e[h]||(e[h]=[]);-1===b.inArray(f,e[h])&&e[h].push(f)}}return{_itemValueCheckFuncs:g,_schemaKeys:d,_schema:a,_realProps:c,
_dependProps:k,_aryProps:o,_dependencyMap:e}}function G(){}function D(b){fa(b)||c(ga);this.models={};this.name=b;this._updateLogs=null}function H(b,a,g,d){this.items={};this.size=0;this.name=a.name;this._manager=d;for(var c in b)b[c]&&b[c].id&&(this.idKey=c);this._idType=(a=b[this.idKey].type)?"string"===a?ra:Y:ra;this._schema=b;this._itemConstructor=t(b,g,this);d.models[this.name]=this}function t(a,d,k){function f(a,g,d){var m=!1,o=["sort","reverse","pop","shift"],q=null;d.addEventListener("changeBefore",
function(d){k&&(a._model!==k||!k._manager)&&c(W,[a._values[k.idKey],d.method]);var f=e.u.obj.argsToArray(d.args);if(-1===b.inArray(d.method,o)){var j=!0;switch(d.method){case "splice":j=!1;f.shift();f.shift();break;case "copyFrom":f=f[0];break;case "set":f.shift()}j&&(d=a._validateItemValue(g,f),0<d.length&&c(O,g,d))}k?(d=k,d._manager&&(f=d._manager,j=d.name,f._oldValueLogs||(f._oldValueLogs={}),f._oldValueLogs[j]||(f._oldValueLogs[j]={}),f=f._oldValueLogs[j],d=a._values[d.idKey],f[d]||(f[d]={}),
f[d][g]||(f[d][g]=a._values[g].toArray())),(m=k._manager?k._manager.isInUpdate():!1)||k._manager.beginUpdate()):q=a._values[g].toArray()});d.addEventListener("change",function(){if(!a._isInSet){var b={type:"change",target:a,props:{}};b.props[g]={};k?(j(k,b),m||k._manager.endUpdate()):d.equals(q)||(b.props[g]={oldValue:q,newValue:a._values[g]},a.dispatchEvent(b))}})}function q(b){this._values={};this._nullProps={};var d={},o=[],e=w._aryProps,j;for(j in b)a.hasOwnProperty(j)||c(g,[k?k.name:ia,j]);for(var h in a){if((j=
a[h])&&p(j.type)){var i=T();i.relatedItem=this;this._values[h]=i;this._nullProps[h]=!0}j&&j.depend?b&&h in b&&c(V,[k?k.name:ia,h]):(i=null,b&&h in b?i=b[h]:j&&void 0!==j.defaultValue?(i=j.defaultValue,p(j.type)&&o.push(h)):(i=null,j&&p(j.type)&&o.push(h)),d[h]=i)}l(this,d,o,null,!0);b=0;for(d=e.length;b<d;b++)f(this,e[b],this.get(e[b]))}var w=L(a,d);b.extend(q.prototype,G.prototype,w,{get:function(g){if(0===arguments.length)return b.extend({},this._values);a.hasOwnProperty(g)||c(o,[k?k.name:ia,g]);
return this._values[g]},set:function(b){var a=!1,g=b;2===arguments.length&&(g={},g[arguments[0]]=arguments[1]);k&&(a=k.idKey,(this._model!==k||!this._model._manager)&&c(W,[this._values[a],"set"],this),a in g&&g[a]!==this._values[a]&&c(ya,null,this),(a=k._manager.isInUpdate())||k._manager.beginUpdate());this._isInSet=!0;var d=null;try{d=l(this,g,null)}catch(m){throw this._isInSet=!1,!a&&k&&k._manager&&k._manager.endUpdate(),m;}this._isInSet=!1;k?(d&&j(k,d),a||k._manager.endUpdate()):d&&this.dispatchEvent(d)},
regardAsNull:function(b){return this._isArrayProp(b)?!0===this._nullProps[b]:null===this._values[b]},_isArrayProp:function(b){return a[b]&&a[b].type&&-1<a[b].type.indexOf("[]")?!0:!1},_validateItemValue:function(b,a){return this._itemValueCheckFuncs[b](a)}});k&&b.extend(q.prototype,{_model:k,getModel:function(){return this._model}});return q}function N(){this.length=0;this._src=[]}function T(){return new N}function S(b){return b&&b.constructor===N?!0:!1}var ra="string",Y="number",ga=15E3,Z=15001,
ya=15003,W=15005,$=15008,R=15009,O=15011,V=15012,g=15013,o=15014,q=15016,k=15900,w=15901,C=15902,y=15903,M=15904,Ta=6,Ka=15800,La=15801,Ma=15802,Na=15803,la=15804,U=15805,da=15806,va=15807,ma=15808,na=15809,za=15810,oa=15811,Aa=15812,ha=15813,Ea=15814,Oa=15815,Ba=15816,wa=15817,Ha=15818,Ia=15819,Ja=15820,Ca=15821,xa=15822,Ua=15823,Va=15824,ia="n/a",Qa=2;G.prototype.hasEventListener=function(b,a){if(!this.__listeners)return!1;var g=this.__listeners[b];if(!g||!this.__listeners.hasOwnProperty(b))return!1;
for(var d=0,c=g.length;d<c;d++)if(g[d]===a)return!0;return!1};G.prototype.addEventListener=function(a,g){(2!==arguments.length||!x(a)||!b.isFunction(g))&&c(15015);this.hasEventListener(a,g)||(this.__listeners||(this.__listeners={}),this.__listeners.hasOwnProperty(a)||(this.__listeners[a]=[]),this.__listeners[a].push(g))};G.prototype.removeEventListener=function(b,a){if(this.hasEventListener(b,a))for(var g=this.__listeners[b],d=0,c=g.length;d<c;d++)if(g[d]===a){g.splice(d,1);break}};G.prototype.dispatchEvent=
function(b){if(this.__listeners){var a=this.__listeners[b.type];if(a){b.target||(b.target=this);var g=!1;b.preventDefault=function(){g=true};for(var d=0,c=a.length;d<c;d++)a[d].call(b.target,b);return g}}};D.prototype=new G;b.extend(D.prototype,{createModel:function(g){(!g||"object"!==typeof g)&&c(Z,null,[a(k)]);if(!b.isArray(g))return this.models[g.name]?this.models[g.name]:u(g,this);var d=g.length;d||c(Z,null,[a(k)]);for(var o={},e=[],f=0;f<d;f++){var q=g[f].name;if(this.models[q])i[f]=manager.models[g.name];
else try{e.push(q);q=[];g[f].base&&q.push(g[f].base.substring(1));for(var j in g[f].schema){var w=g[f].schema[j];if(w){var h=w.type;h&&"@"===h.substring(0,1)&&(h=-1===h.indexOf("[]")?h.substring(1):h.substring(1,h.length-2),q.push(h))}}o[f]={depends:q}}catch(l){c(Z)}}for(var i={size:0};i.size<d;){j={};w=!1;for(f=0;f<d;f++)if(!o[f].registed){for(var q=o[f].depends,h=0,C=q.length;h<C;h++)if(!this.models[q[h]]){j[q[h]]=!0;break}h===C&&(i[f]=u(g[f],this),i.size++,w=!0,o[f].registed=!0)}if(!w){var f=!0,
r;for(r in j)if(-1===b.inArray(r,e)){f=!1;break}f&&c(15004);c(Z,null,[a(y,r)])}}g=[];for(f=0;f<d;f++)g.push(i[f]);return g},dropModel:function(b){if((b=x(b)?b:"object"===typeof b?b.name:null)&&this.models[b]){var a=this.models[b];a._manager=null;delete this.models[b];return a}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var b=this._updateLogs,a=this._oldValueLogs;this._oldValueLogs=
this._updateLogs=null;var g={},d;for(d in b)if(b.hasOwnProperty(d)){var c;c=this.models[d];var k=b[d],o=[],f=[],q=[],j=[],h=void 0;for(h in k){for(var w=k[h],i=!0,l=[],y=w.length-1;0<=y;y--){var C=w[y],r=C.type;if(r===Qa)l.push(C.ev);else{a:{for(i=0;i<y;i++){var u=w[i].type;if(1===u||3===u){y=w[i];break a}}y=null}if(1===r)y&&3===y.type?o.push({id:h,oldItem:y.item,newItem:C.item}):f.push(C.item);else if(y=y&&3===y.type?y.item:y?null:C.item)j.push(y),y.dispatchEvent({type:"remove",model:c});i=!1;break}}if(i&&
0<l.length){C={};for(y=l.length-1;0<=y;y--)for(var p in l[y].props)C[p]||(e.core.data.isObservableArray(c.get(h).get(p))?(r=a&&a[c.name]&&a[c.name][h]&&a[c.name][h][p],c.get(h).get(p).equals(r)||(C[p]={oldValue:r})):C[p]={oldValue:l[y].props[p].oldValue});y=!1;for(p in C)r=C[p].oldValue,w=c.get(h).get(p),r===w||n(r)&&n(w)?delete C[p]:(C[p].newValue=c.get(h).get(p),y=!0);y&&(l={type:"change",target:l[0].target,props:C},q.push(l),l.target.dispatchEvent(l))}}(c=0===f.length&&0===o.length&&0===j.length&&
0===q.length?!1:{created:f,recreated:o,removed:j,changed:q})&&(g[d]=c)}b=!1;for(d in g)b=!0,c=g[d],this.models[d].dispatchEvent({type:"itemsChange",created:c.created,recreated:c.recreated,removed:c.removed,changed:c.changed});g={type:"itemsChange",models:g};b&&this.dispatchEvent(g)}},_dataModelItemsChangeListener:function(b){var a=b.target.manager,g={};g[b.target.name]=b;a.dispatchEvent({type:"itemsChange",models:g})}});b.extend(H.prototype,G.prototype,{create:function(a){this._manager||c(15006,[this.name,
"create"]);"object"!==typeof a&&!b.isArray(a)&&c(15007);var g=[],k=this.idKey,o=this._manager?this._manager.isInUpdate():!1;o||this._manager.beginUpdate();try{for(var f=[],e=J(a),q=0,h=e.length;q<h;q++){var w=e[q],y=w[k];(""===y||null==y)&&c(15002);!i(y,!0)&&!x(y)&&c(O,[this.name,k]);var C=this._findById(y);if(C){g.push(C);var r=l(C,w,null,[k]);r&&j(this,r)}else{var p=new this._itemConstructor(w);this.items[y]=p;this.size++;f.push(p);g.push(p)}}0<f.length&&d(this,1,f)}catch(u){throw o||this._manager.endUpdate(),
u;}o||this._manager.endUpdate();return b.isArray(a)?g:g[0]},get:function(a){if(b.isArray(a)||e.core.data.isObservableArray(a)){for(var g=[],d=0,c=a.length;d<c;d++)g.push(this._findById(a[d]));return g}return this._findById(a)},remove:function(a){this._manager||c(15006,[this.name,"remove"]);var g=this._manager?this._manager.isInUpdate():!1;g||this._manager.beginUpdate();for(var k=this.idKey,o=J(a),f=[],e=[],q=0,j=o.length;q<j;q++)if(this.has(o[q])){var h=x(o[q])||i(o[q],!0)?o[q]:o[q]._values[k],w=
this.items[h];delete this.items[h];this.size--;e.push(w);w._model=null;f.push(w)}else e.push(null);0<f.length&&d(this,3,f);g||this._manager.endUpdate();return b.isArray(a)?e:e[0]},removeAll:function(){var b=this.toArray();0<b.length&&this.remove(b);return b},has:function(a){return x(a)||i(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&b.isFunction(a.get)&&a===this.items[a.get(this.idKey)]:!1},getManager:function(){return this._manager},_findById:function(b){b=this.items[b];return void 0===
b?null:b},_dispatchItemsChangeEvent:function(b){b={type:"itemsChange",created:[],recreated:[],removed:[],changed:[b]};this.dispatchEvent(b);this._manager&&(b.target=this,this._manager._dataModelItemsChangeListener(b))},toArray:function(){var b=[],a=this.items,g;for(g in a)a.hasOwnProperty(g)&&b.push(a[g]);return b}});b.extend(N.prototype,G.prototype);var ta={equals:function(a){var g=this.length;if(!b.isArray(a)&&!S(a)||a.length!==g)return!1;for(var a=S(a)?a._src:a,d=0;d<g;d++){var c=this[d],k=a[d];
if(!(c===k||n(c)&&n(k)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=S(a)?a._src:a;b.isArray(a)||c(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(b){return this[b]},set:function(b,a){this[b]=a},toArray:function(){return this.slice(0)},concat:function(){for(var b=e.u.obj.argsToArray(arguments),a=0,g=b.length;a<g;a++)S(b[a])&&(b[a]=b[a].toArray());return this.concat.apply(this,b)}},ua="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),
ea;for(ea in ta)ta.hasOwnProperty(ea)&&-1===b.inArray(ea,ua)&&ua.push(ea);var Xa=["concat","slice","splice","filter","map"],Ya=["reverse","sort"],Za="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ea=0;for(var $a=ua.length;ea<$a;ea++){var Pa=ua[ea];N.prototype[Pa]=function(a){function g(){var c=d.apply(this._src,arguments);if(-1!==b.inArray(a,Ya))c=this;else if(-1!==b.inArray(a,Xa)){var k=T();k.copyFrom(c);c=k}return c}var d=ta[a]?ta[a]:Array.prototype[a];return-1===b.inArray(a,
Za)?g:function(){if(!this.dispatchEvent({type:"changeBefore",method:a,args:arguments})){var b=g.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:a,args:arguments,returnValue:b});return b}}}(Pa)}e.u.obj.expose("h5.core.data",{createManager:function(b,a){fa(b)||c(ga);var g=new D(b);if(null!=a){""===a&&(a="window");var d={};d[b]=g;e.u.obj.expose(a,d)}return g},createObservableArray:T,createObservableItem:function(b){F(b,!1,null,!0);var a=B(b);E(b,a,!0);return new (t(b,
a))},isObservableArray:S,isObservableItem:function(a){return!(!a||!a.constructor||!a._itemValueCheckFuncs||b.isFunction(a.getModel))},createSequence:function(a,g,d){function c(){return q}function k(){var a=q;q+=j;return a}function o(){return q.toString()}function f(){var a=q;q+=j;return a.toString()}function e(){}var q=null!=a?a:1,j=null!=g?g:1,a=1===d?{current:o,next:f,returnType:1}:{current:c,next:k,returnType:2};a.setCurrent=function(a){q=a};b.extend(e.prototype,a);return new e},SEQ_STRING:1,SEQ_INT:2})})();
(function(){function s(a,b){return!a||a.nodeType!==j?void 0:a.getAttribute(b)}function z(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function n(a,b,d,c){var f=[],b=J(b);if(!0===c)return v(f,a,b,d),f;for(var a=a.childNodes,c=0,e=a.length;c<e;c++)v(f,a[c],b,d);return f}function v(a,b,d,c){if(b.nodeType===j){for(var f=0,e=d.length;f<e;f++){var h=b.getAttribute(d[f]);if(void 0===c){if(null!==h){a.push(b);break}}else if(null!==h&&h==c){a.push(b);break}}if(0<b.childNodes.length){b=
b.childNodes;f=0;for(e=b.length;f<e;f++)v(a,b[f],d,c)}}}function i(a,d){for(var a=J(a),c=[],k=0,f=a.length;k<f;k++){var e=a[k];if(e.nodeType===j&&!(!0===d&&(null!=s(e,L)||null!=s(e,G))))for(var h=n(e,u,void 0,!0),i=0,l=h.length;i<l;i++){for(var r=!0,p=h[i];null!=p&&p!==e;p=p.parentNode)if(null!=s(p,L)||null!=s(p,G)){r=!1;break}r&&c.push(h[i])}}return b(c)}function x(a,d,c){for(var k=[],f=0,e=a.length;f<e;f++){var h=a[f];if(h.nodeType===j){if(!0===c){if(null!=h.getAttribute(d)){k.push(h);continue}if(null!=
s(h,L)||null!=s(h,G))continue}for(var i=n(h,d,void 0,!1),l=0,r=i.length;l<r;l++){var p=b(i[l]).parent("[data-h5-context],[data-h5-loop-context]")[0];(void 0===p||p===h)&&k.push(i[l])}}}return b(k)}function E(a){return a&&a.addEventListener&&a.getModel&&!b.isArray(a)&&!e.core.data.isObservableArray(a)||e.core.data.isObservableItem(a)?!0:!1}function B(a,b){for(var d=0,c=a.length;d<c;d++){var f=a[d];f.nodeType===j&&f.setAttribute(H,b)}}function h(a,d,f){var k=W++,j=d[0];b(j).empty();if(f){!b.isArray(f)&&
!e.core.data.isObservableArray(f)&&c(Z);B(d,k);a._addBindingEntry(f,j,k);e.core.data.isObservableArray(f)&&!a._isWatching(f)&&(d=function(b){a._observableArray_changeListener(b)},a._listeners[a._getContextIndex(f)]=d,f.addEventListener("change",d));var d=s(j,D),d=z(a._getSrcCtxNode(d).childNodes),h=[];a._loopElementsMap[k]=h;for(var k=document.createDocumentFragment(),i=f.get?function(a){return f.get(a)}:function(a){return f[a]},l=0,r=f.length;l<r;l++){for(var p=[],u=0,n=d.length;u<n;u++){var t=V(d[u]);
p.push(t);k.appendChild(t)}h[l]=p;j.appendChild(k);A(a,p,i(l),!1,!0)}}}function A(a,d,q,k,j){d=J(d);if(k)h(a,d,q);else{k=W++;q&&(("object"!==typeof q||b.isArray(q)||e.core.data.isObservableArray(q))&&c(Z),B(d,k),a._addBindingEntry(q,d,k));var l=E(q);l&&!a._isWatching(q)&&(k=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(q)]=k,q.addEventListener("change",k));i(d,j).each(function(){p(this,q,l)});f(a,d,q,!1,j);f(a,d,q,!0,j)}}function f(a,b,d,c,f){var e=c?"data-h5-loop-context":
"data-h5-context";x(b,e,f).each(function(){var b=s(this,e),f=null;d&&(f=E(d)?d.get(b):d[b]);A(a,this,f,c)})}function p(a,d,f){for(var k=s(a,u).split(S),e=[],j=[],h=[],l=0,i=k.length;l<i;l++){var r=k[l];if(-1===r.indexOf(T))0<b.trim(r).length&&(e.push(null),j.push(null),h.push(b.trim(r)));else{var p=r.split(T),r=b.trim(p[0]),p=b.trim(p[1]),n=null,t=ra.exec(r);t&&(n=t[1],r=/(\S+)[\s\(]/.exec(r)[1]);0<r.length&&0<p.length&&(e.push(r),j.push(n),h.push(p))}}k=b(a);l=0;for(i=e.length;l<i;l++)switch(p=e[l],
n=j[l],t=h[l],r=null,d&&(r=f?d.get(t):d[t]),null==p&&("input"===a.tagName.toLowerCase()?(p="attr",n="value"):p="text"),p){case "text":null==r?k.text(""):k.text(r);break;case "html":null==r?k.html(""):k.html(r);break;case "class":var p=s(a,N),t=(n=null==p)?"":" ",v=!1;r&&(v=!RegExp("\\s"+r+"\\s").test(" "+p+" "));k[0].className=(n?"":p)+(v?t+r:"");break;case "attr":n||c(Y);null==r?k.removeAttr(n):k.attr(n,r);break;case "style":n||c(Y);null==r?k.css(n,""):k.css(n,r);break;default:c(ga)}}function a(a,
b,d){for(var c=0,f=d.length;c<f;c++){var e=d[c];b.removeChild(e);a._removeBinding(e)}}function r(a){for(var a=a.childNodes,b=[],d=0,c=a.length;d<c;d++)b.push(V(a[d]));return b}function l(a,b,d,c,f){for(var e=document.createDocumentFragment(),j=[],h=0,l=f.length;h<l;h++){var i=r(d);j[h]=i;for(var p=0,n=i.length;p<n;p++)e.appendChild(i[p]);A(a,i,f[h])}Array.prototype[c].apply(b,j);return e}function K(b,d,c,f,e,j){var h=f.length;if(0!==h){for(var l=f[0],i=l,c=1===h?c.length:i+f[1];i<c;i++){var p=e[i];
p&&a(b,d,p)}e.splice(l,f[1]);if(!(2>=h)){i=e.length;i=0===i||0===l?d.firstChild:l>=i?null:e[l][0];c=document.createDocumentFragment();l=[l,0];for(p=2;p<h;p++){for(var n=r(j),u=0,s=n.length;u<s;u++)c.appendChild(n[u]);A(b,n,f[p]);l.push(n)}d.insertBefore(c,i);Array.prototype.splice.apply(e,l)}}}function d(a,b){void 0!==a.nodeType?a.nodeType===j&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=z(a));this._bindRootId=$++;R[this._bindRootId]=this;for(var d=[],
c=0,f=this._targets.length;c<f;c++){var e=this._targets[c];if(e.nodeType===j){e.setAttribute(t,this._bindRootId);for(var h=n(e,[L,G],void 0,!0),l=0,i=h.length;l<i;l++){var r=ya++;h[l].setAttribute(D,r)}h=n(e,u,void 0,!0);l=0;for(i=h.length;l<i;l++)r=h[l],/class\s*:/.test(s(r,u))&&""!=r.className&&r.setAttribute(N,r.className)}d.push(e.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};A(this,this._targets,this._rootContext,
!1,!0)}var j=1,u="data-h5-bind",L="data-h5-context",G="data-h5-loop-context",D="data-h5-dyn-ctx",H="data-h5-dyn-vid",t="data-h5-dyn-bind-root",N="data-h5-dyn-cn",T=":",S=";",ra=/\(\s*(\S+)\s*\)/,Y=7100,ga=7101,Z=7102,ya=0,W=0,$=0,R={},O={},V;(function(){var a=document.createElement("div");a.h5Dummy="a";var d=a.cloneNode(!1),c=void 0!==d.h5Dummy;a.h5Dummy=void 0;c?(d.h5Dummy=void 0,V=function(a){return a.nodeType===j?b(b.trim(a.outerHTML))[0]:a.cloneNode(!0)}):V=function(a){return a.cloneNode(!0)}})();
b.extend(d.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(d.nodeType===j){this._removeBinding(d);d.removeAttribute(t);for(var c=n(d,N,void 0,!0),f=0,e=c.length;f<e;f++)c[f].removeAttribute(N);d=n(d,D,void 0,!0);f=0;for(c=d.length;f<c;f++)d[f].removeAttribute(D)}}delete R[this._bindRootId]},_observableArray_changeListener:function(b){var d=this._getViewsFromSrc(b.target);if(d)for(var c in d)if(d.hasOwnProperty(c)){var f=d[c],e=this._getSrcCtxNode(s(f,
D)),j=this._loopElementsMap[c];switch(b.method){case "set":K(this,f,b.target,[b.args[0],1,b.args[1]],j,e);break;case "shift":case "pop":var h=j[b.method]();h&&a(this,f,h);break;case "unshift":h=l(this,j,e,b.method,b.args);f.insertBefore(h,f.firstChild);break;case "push":h=l(this,j,e,b.method,b.args);f.appendChild(h);break;case "splice":K(this,f,b.target,b.args,j,e);break;case "reverse":for(var h=f,i=j;h.firstChild;)h.removeChild(h.firstChild);for(var p=0,f=i.length;p<f;p++)for(var e=i[p],n=e.length-
1;0<=n;n--)h.insertBefore(e[n],h.firstChild);j.reverse();break;case "sort":case "copyFrom":for(var h=this._loopElementsMap,i=c,p=b.target,n=j,j=e,e=0,u=n.length;e<u;e++)a(this,f,n[e]);for(var n=document.createDocumentFragment(),u=[],e=0,t=p.length;e<t;e++){var v=r(j);u[e]=v;for(var z=0,x=v.length;z<x;z++)n.appendChild(v[z]);A(this,v,p.get(e))}f.appendChild(n);h[i]=u}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=
!0);var c=this,f;for(f in b)if(b.hasOwnProperty(f)){var e=b[f];i(e,d).each(function(){p(this,a.target,!0)});x(e,L).each(function(){var b=s(this,L);if(!(b in a.props))return!0;c._removeBinding(this);var d=s(this,D),d=c._getSrcCtxNode(d),d=V(d);this.parentNode.replaceChild(d,this);A(c,d,a.props[b].newValue)});x(e,G).each(function(){var b=s(this,G);if(!(b in a.props)||a.target._isArrayProp(b))return!0;c._removeBinding(this);A(c,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,
d=this._srces.length;b<d;b++){var c=this._srces[b];if(s(c,D)===a)return c;c=n(c,D,a);if(0<c.length)return c[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(a){return b.inArray(a,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);O[d]=a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;
return!1},_removeBindingEntry:function(a){var b=O[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var c=this._srcToViewMap[d];c&&c[a]&&(delete c[a],this._hasBindingForSrc(c)||(c=!1,E(b)?(b.removeEventListener("change",this._listeners[d]),c=!0):e.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[d]),c=!0),c&&delete this._listeners[d],delete this._srcToViewMap[d]))}O[a]&&delete O[a]}},_removeBinding:function(a){if(a.nodeType===j){var b=s(a,H);null!=b&&(this._removeBindingEntry(b),
a.removeAttribute(H));for(var a=n(a,H),b=0,d=a.length;b<d;b++){var c=a[b];this._removeBindingEntry(s(c,H));c.removeAttribute(H)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});db={createBinding:function(a,b){return new d(a,b)}}})();(function(){function s(a){return e.u.obj.isJQueryObject(a)?a:b(a)}function z(){this.__cachedTemplates={}}var n="[",v=7001,i=7002,F=7003,E=7010,B=7011,h=e.async.deferred,A={escapeHtml:function(a){return e.u.str.escapeHtml(a)}},
f={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a,b,c){this.cacheUrls.length>=this.MAX_CACHE&&this.deleteCache(this.cacheUrls[0]);this.cache[a]={};this.cache[a].templates=b;this.cache[a].path=c;this.cacheUrls.push(a)},deleteCache:function(a,b){b||delete this.cache[a];for(var c=0,f=this.cacheUrls.length;c<f;c++)if(this.cacheUrls[c]===a){this.cacheUrls.splice(c,1);break}},getTemplateByUrls:function(a){function f(a){if(0!==a.length){var d={},e=[];a.each(function(){var a=b.trim(this.id),
f=b.trim(this.innerHTML);a||c(i,null,{});try{var j=new EJS.Compiler(f,n);j.compile();d[a]=j.process;e.push(a)}catch(h){f=h.lineNumber,c(E,[f?" line:"+f:"",h.message],{id:a,error:h,lineNo:f})}});return{compiled:d,data:{ids:e}}}}function l(a,d,c){e.ajax(d).done(function(d,e,j){delete u.accessingUrls[a];d=b(j.responseText).filter(function(){return this.tagName&&-1===this.tagName.indexOf("/")&&8!==this.nodeType});e=this.url;if(0<d.not('script[type="text/ejs"]').length)c.reject(da(B,null,{url:a,path:e}));
else{j=null;try{j=f(d.filter('script[type="text/ejs"]'))}catch(h){h.detail.url=a;h.detail.path=e;c.reject(h);return}var i,l;try{var p=j.compiled;l=j.data;l.path=e;l.absoluteUrl=a;i=p;u.append(a,p,e)}catch(n){c.reject(da(v,null,{error:n,url:a,path:e}));return}c.resolve({ret:i,data:l})}}).fail(function(b){delete u.accessingUrls[a];c.reject(da(F,[b.status,a],{url:a,path:d,error:b}))})}for(var p={},d=[],j=[],u=this,s=function(a){var b=u.cache[a].templates;u.deleteCache(a,!0);u.cacheUrls.push(a);return b},
z=0;z<a.length;z++){var D=a[z],A=U(D);if(this.cache[A])b.extend(p,s(A)),j.push({absoluteUrl:A});else if(this.accessingUrls[A])d.push(this.accessingUrls[A]);else{var t=e.async.deferred();d.push(this.accessingUrls[A]=t.promise());l(A,D,t)}}var x=h();e.async.when(d).done(function(){for(var a=e.u.obj.argsToArray(arguments),d=0,c=a.length;d<c;d++)b.extend(p,a[d].ret),j.push(a[d].data);x.resolve(p,j)}).fail(function(a){x.reject(a)});return x.promise()}};b.extend(z.prototype,{load:function(a){var e=h(),
l=this,i=null;switch(b.type(a)){case "string":b.trim(a)||c(7004);i=[a];break;case "array":i=a;0===i.length&&c(7004);for(var a=0,d=i.length;a<d;a++)x(i[a])?b.trim(i[a])||c(7004):c(7004);break;default:c(7004)}f.getTemplateByUrls(i).done(function(a,d){b.extend(l.__cachedTemplates,a);e.resolve(d)}).fail(function(a){e.reject(a)});return e.promise()},getAvailableTemplates:function(){var a=[],b;for(b in this.__cachedTemplates)a.push(b);return a},register:function(a,f){"string"!==b.type(f)?c(7E3,null,{id:a}):
(!x(a)||!b.trim(a))&&c(i,[]);try{var e=new EJS.Compiler(f,n);e.compile();this.__cachedTemplates[a]=e.process}catch(h){e=h.lineNumber,c(E,[e?" line:"+e:"",h.message],{id:a})}},isValid:function(a){try{return(new EJS.Compiler(a,n)).compile(),!0}catch(b){return!1}},get:function(a,f){var e=this.__cachedTemplates;(!x(a)||!b.trim(a))&&c(i);(e=e[a])||c(7005,a);var h=f?b.extend(!0,{},f):{},d=h.hasOwnProperty("_h")?new EJS.Helpers(h):new EJS.Helpers(h,{_h:A}),j=null;try{j=e.call(h,h,d)}catch(p){c(7006,p.toString(),
p)}return j},update:function(a,b,c){return s(a).html(this.get(b,c))},append:function(a,b,c){return s(a).append(this.get(b,c))},prepend:function(a,b,c){return s(a).prepend(this.get(b,c))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(a){if(void 0===a)this.__cachedTemplates={};else{var f=null;switch(b.type(a)){case "string":f=[a];break;case "array":a.length||c(i);f=a;break;default:c(i)}for(var a=0,e=f.length;a<e;a++){var h=f[a];(!x(h)||!b.trim(h))&&c(i)}a=0;for(e=f.length;a<
e;a++)delete this.__cachedTemplates[f[a]]}},bind:function(a,f){var h=null;null==a&&c(7007);b.isArray(a)?h=a:(h=b(a),0===h.length&&c(7007),h=h.toArray());(null==f||"object"!==typeof f||b.isArray(f)||e.core.data.isObservableArray(f))&&c(7009);return db.createBinding(h,f)}});var p=new z;p.createView=function(){return new z};b(function(){b('script[type="text/ejs"]').each(function(){var a=b.trim(this.id),c=b.trim(this.innerHTML);0!==c.length&&a&&(c=new EJS.Compiler(c,n),c.compile(),p.__cachedTemplates[a]=
c.process)})});e.u.obj.expose("h5.core",{view:p})})();(function(){function c(a){var d={},f;for(f in D){var e=b("<div></div>").addClass(a).addClass(f).appendTo("body"),j=b.camelCase(f);d[j]={};b.map(D[f],function(a){d[j][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)});e.remove()}return d}function z(a,b){var d=window.document.createElement("v:"+a),c;for(c in b)d.style[c]=b[c];return d}function n(a,b){for(var d=[],c=a/2,f=0.8*a/2,e=360/b*Math.PI/180,j=1;j<=b;j++){var h=
e*j,i=Math.cos(h),h=Math.sin(h);d.push({from:{x:c+f/2*i,y:c+f/2*h},to:{x:c+f*i,y:c+f*h}})}return d}function v(a){return function(){var b=document.body,d=document.documentElement,c=N?b:T?d:null;return c?"Height"===a?c["client"+a]>c["scroll"+a]?c["client"+a]:c["scroll"+a]:c["client"+a]:Math.max(b["scroll"+a],d["scroll"+a],b["offset"+a],d["offset"+a],d["client"+a])}}function i(a){return function(){var b=N?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+
a]}}function F(a){var b=N?document.body:document.documentElement;return u.isiOS?window["inner"+a]:b["client"+a]}function E(a){var d=b(a)[0],c=document.body,f=b("html")[0],a={top:0,left:0};if(d===c&&T)return{top:parseFloat(f.currentStyle.paddingTop||0)+parseFloat(c.currentStyle.marginTop||0)+parseFloat(c.currentStyle.borderTop||0),left:parseFloat(f.currentStyle.paddingLeft||0)+parseFloat(c.currentStyle.marginLeft||0)+parseFloat(c.currentStyle.borderLeft||0)};"undefined"!==typeof d.getBoundingClientRect&&
(a=d.getBoundingClientRect());c=N?c:document.documentElement;d=c.clientTop||0;c=c.clientLeft||0;return{top:a.top+W()-d,left:a.left+$()-c}}function B(){b.each(G(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function h(a){a=L(a)?a[0]:a;return a===window||a===document||a===document.body}function A(a){this.style=b.extend(!0,{},a);a=this.style.throbber.width;
this.group=z("group",{width:a+"px",height:this.style.throbber.height+"px"});this.group.className=K;for(var a=n(a,this.style.throbber.lines),d=this.style.throbberLine.color,c=this.style.throbberLine.width,f=0,e=a.length;f<e;f++){var j=a[f],h=j.from,i=j.to,j=z("line");j.strokeweight=c;j.strokecolor=d;j.fillcolor=d;j.from=h.x+","+h.y;j.to=i.x+","+i.y;h=z("stroke");h.opacity=1;j.appendChild(h);this.group.appendChild(j)}this._createPercentArea()}function f(g,f){var j=this,k=b(g),i=b.extend(!0,{},{message:"",
percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},f);this._displayed=!1;this._throbbers=[];this._settings=i;this._styles=b.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(i.theme));this._$target=(this._isScreenLock=h(k))?b("body"):k;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){j._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){j._handleResizeEvent()};
this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof i.fadeIn?i.fadeIn:-1;this._fadeOutTime="number"===typeof i.fadeOut?i.fadeOut:-1;this._$content=b();this._$overlay=b();this._$skin=b();for(var k=e.u.str.format(d,""===i.message?'style="display: none;"':"",i.message),n="https"===document.location.protocol?"return:false":"about:blank",u=0,t=this._$target.length;u<t;u++)this._$content=this._$content.add(b("<div></div>").append(k).addClass(p).addClass(i.theme).addClass(a).hide()),
this._$overlay=this._$overlay.add((i.block?b("<div></div>"):b()).addClass(p).addClass(i.theme).addClass(r).hide()),this._$skin=this._$skin.add((T||N?b("<iframe></iframe>"):b()).attr("src",n).addClass(p).addClass(l).hide());var v=this._isScreenLock&&J?"fixed":"absolute";b.each([this._$overlay,this._$content],function(){this.css("position",v)});i=i.promises;k=function(){j.hide()};b.isArray(i)?(b.map(i,function(a){return a&&b.isFunction(a.promise)?a:null}),0<i.length&&na(e.async.when(i),"pipe",[k,k])):
i&&b.isFunction(i.promise)&&na(i,"pipe",[k,k])}var p="h5-indicator",a="content",r="overlay",l="skin",K="vml-root",d='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',j=500,u=e.env.ua,L=e.u.obj.isJQueryObject,G=e.u.obj.argsToArray,D={throbber:["width","height"],"throbber-line":["width","color"]},H=!!document.createElement("canvas").getContext,t=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';
a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),N="CSS1Compat"!==document.compatMode,T=u.isIE&&6>=u.browserVersion,S=u.isChrome&&u.isDesktop,J=!(u.isAndroidDefaultBrowser||u.isiOS&&5>u.browserVersion||T||N||u.isWindowsPhone),Y=null,ga=null,Z=null,U=null,W=null,$=null,R=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div")),d=["Webkit","Moz","O","ms","Khtml"],c=d.length;return function(f){f=b.camelCase(f);if(f in a.style)return!0;
for(var f=f.charAt(0).toUpperCase()+f.slice(1),e=0;e<c;e++)if(d[e]+f in a.style)return!0;return!1}}(),ga=function(a){return function(){var b=document.body,d=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:N?b["client"+a]:d["client"+a]}}("Height"),Z=v("Height"),U=v("Width"),W=i("Top"),$=i("Left");if(!H&&t){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var O=document.createElement("style");O.setAttribute("type","text/css");O.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }";
document.getElementsByTagName("head")[0].appendChild(O)}Y=R("animationName");A.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){for(var a=this.style.throbber.lines,b=this.style.throbber.roundTime,d=this.highlightPos,c=this.group.childNodes,f=0,e=c.length;f<e;f++){var j=c[f];if("textbox"!==j.nodeName){var h=f+1;
j.firstChild.opacity=h==d?"1":h==d+1||h==d-1?"0.75":"0.4"}}d==a?d=0:d++;this.highlightPos=d;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))},_createPercentArea:function(){var a=z("textbox"),d=b("<table><tr><td></td></tr></table>"),c=d.find("td");c.width(this.group.style.width);c.height(this.group.style.height);c.css("line-height",this.group.style.height);c.addClass("throbber-percent");a.appendChild(d[0]);this.group.appendChild(a)},setPercent:function(a){b(this.group).find(".throbber-percent").html(a)}};
var V=function(a){this.style=b.extend(!0,{},a);this.canvas=document.createElement("canvas");this.baseDiv=document.createElement("div");this.percentDiv=document.createElement("div");var a=this.canvas,d=this.baseDiv,c=this.percentDiv;a.width=this.style.throbber.width;a.height=this.style.throbber.height;a.style.display="block";a.style.position="absolute";d.style.width=this.style.throbber.width+"px";d.style.height=this.style.throbber.height+"px";d.appendChild(a);c.style.width=this.style.throbber.width+
"px";c.style.height=this.style.throbber.height+"px";c.style.lineHeight=this.style.throbber.height+"px";c.className="throbber-percent";d.appendChild(c);this.positions=n(a.width,this.style.throbber.lines)};V.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){b(this.baseDiv).remove();this._runId&&(S?clearInterval(this._runId):clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.canvas,b=a.getContext("2d"),
d=this.highlightPos,c=this.positions,f=this.style.throbberLine.color,e=this.style.throbberLine.width,j=this.style.throbber.lines,h=this.style.throbber.roundTime;a.width=a.width;for(var i=0,l=c.length;i<l;i++){b.beginPath();b.strokeStyle=f;b.lineWidth=e;var p=i+1;b.globalAlpha=p==d?1:p==d+1||p==d-1?0.75:0.4;var n=c[i],p=n.from,n=n.to;b.moveTo(p.x,p.y);b.lineTo(n.x,n.y);b.stroke()}d==j?d=0:d++;this.highlightPos=d;if(S){var r=0;this._runId=setInterval(function(){r++;a.style.webkitTransform="rotate("+
r+"deg)";360<=r&&(r-=360)},h/360)}else if(Y)a.className="throbber-canvas";else{var u=this;this._runId=setTimeout(function(){u._run.call(u)},Math.floor(h/j))}},setPercent:function(a){this.percentDiv.innerHTML=a}};f.prototype={show:function(){if(this._displayed||0<this._$target.children("."+p).length)return this;this._displayed=!0;for(var a=this,d=this._fadeInTime,c=function(){var d=b(window);a._isScreenLock&&(B(a._$overlay,a._$content),J||(d.bind("touchmove",a._scrollHandler),d.bind("scroll",a._scrollHandler)));
d.bind("orientationchange",a._resizeHandler);d.bind("resize",a._resizeHandler)},f=0,e=this._$target.length;f<e;f++){var j=this._$target.eq(f),h=this._$content.eq(f),i=this._$skin.eq(f),l=this._$overlay.eq(f);!this._isScreenLock&&"static"===j.css("position")&&(j.data("before-position",j.css("position")),j.data("before-zoom",j.css("zoom")),j.css({position:"relative",zoom:"1"}));var n=H?new V(this._styles):t?new A(this._styles):null;n&&(a._throbbers.push(n),a.percent(this._settings.percent),n.show(h.children(".indicator-throbber")[0]));
j.append(i).append(l).append(h)}f=b().add(this._$skin).add(this._$content).add(this._$overlay);0>d?(f.show(),c()):f.fadeIn(d,c);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!this._isScreenLock||!J)for(var d=0,c=this._$target.length;d<c;d++){b=this._$target.eq(d);var f=this._$overlay.eq(d),e=this._$skin.eq(d);if(this._isScreenLock)a=U(),b=Z();else{var j=b[0];a=j.scrollWidth;b=j.scrollHeight;if(T)a=Math.max(a,j.clientWidth),b=Math.max(b,j.clientHeight);
else if(u.isIE&&"function"===typeof getComputedStyle){var j=getComputedStyle(j,null),h=parseFloat(j.width)+parseFloat(j.paddingLeft)+parseFloat(j.paddingRight);a+=h-parseInt(h)-1;j=parseFloat(j.height)+parseFloat(j.paddingTop)+parseFloat(j.paddingBottom);b+=j-parseInt(j)-1}}f.width(a).height(b);(T||N)&&e.width(a).height(b)}},_reposition:function(){for(var a=0,d=this._$target.length;a<d;a++){var c=this._$target.eq(a),f=this._$content.eq(a);if(this._isScreenLock){var e=ga();J?f.css("top",(e-f.outerHeight())/
2+"px"):f.css("top",W()+e/2-f.outerHeight()/2+"px")}else f.css("top",c.scrollTop()+(c.innerHeight()-f.outerHeight())/2);var e=f.innerWidth()-f.width(),j=0;f.children().each(function(){var a=b(this);if("none"===a.css("display"))return!0;j+=a.outerWidth(!0)});f.width(j+e);f.css("left",c.scrollLeft()+(c.innerWidth()-f.outerWidth())/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var a=this,d=this._fadeOutTime,c=b().add(this._$skin).add(this._$content).add(this._$overlay),f=function(){var d=
b(window);c.remove();a._isScreenLock||a._$target.each(function(a,d){var c=b(d);c.css({position:c.data("before-position"),zoom:c.data("before-zoom")});c.removeData("before-position").removeData("before-zoom")});d.unbind("touchmove",a._scrollHandler);d.unbind("scroll",a._scrollHandler);d.unbind("orientationchange",a._resizeHandler);d.unbind("resize",a._resizeHandler);a._resizeEventTimerId&&clearTimeout(a._resizeEventTimerId);a._scrollEventTimerId&&clearTimeout(a._scrollEventTimerId)};if(!Y||S)for(var e=
0,j=this._throbbers.length;e<j;e++)this._throbbers[e].hide();0>d?(c.hide(),f()):c.fadeOut(d,f);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,d=this._throbbers.length;b<d;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!x(a))return this;if(!this._redrawable)return this._lastMessage=a,this;this._$content.children(".indicator-message").css("display","inline-block").text(a);
this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);
this._redrawable=!1;J||T||N?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};e.u.obj.expose("h5.ui",{indicator:function(a,b){return new f(a,b)},isInView:function(a,d){var c,f,e,j,h=b(a);if(void 0===d)f=F("Height"),j=F("Width"),c=W(),e=$();else{j=b(d);if(0===j.find(h).length)return;e=E(j);c=e.top+parseInt(j.css("border-top-width"));e=e.left+parseInt(j.css("border-left-width"));f=j.innerHeight();j=j.innerWidth()}f=c+f;j=e+j;var i=E(h),l=i.top,i=i.left,p=l+h.outerHeight(),h=i+h.outerWidth();
return(c<=l&&l<f||c<p&&p<=f)&&(e<=i&&i<j||e<h&&h<=j)},scrollToTop:function(){function a(){1===window.scrollY&&(d=0);0<d&&(window.scrollTo(0,1),d--,setTimeout(a,j))}var d=3;window.scrollTo(0,1);1!==b(window).scrollTop&&setTimeout(a,j)}})})();(function(){function s(){var c=b.mobile.activePage,c=c&&c[0].id;return x(c)&&0<c.length?c:null}function z(){var b=s();null!==b&&(n.addCSS(b),n.bindController(b))}var n=null,v={},i={},F={},E={},B={},h=!1;e.u.obj.ns("h5.ui.jqm");e.ui.jqm.dataPrefix="h5";var A={__name:"JQMController",
__ready:function(){var c=this;b(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(b){b=b.event.target.id;this.loadScript(b);this.addCSS(b);this.bindController(b)},"{document} pageremove":function(b){var b=b.event.target.id,c=i[b],a=F[b];if(c){for(var e=0,h=c.length;e<h;e++)c[e].dispose();i[b]=[]}if(a){e=0;for(h=a.length;e<h;e++)a[e].dispose();F[b]=[]}},"{document} pagebeforeshow":function(b){var b=
b.event.target.id,c=null;this.addCSS(b);for(c in i)for(var a=i[c],e=b===c,h=0,n=a.length;h<n;h++){var d=a[h];e?d.enableListeners():d.disableListeners()}for(c in F){a=F[c];e=b===c;h=0;for(n=a.length;h<n;h++)d=a[h],e?d.enableListeners():d.disableListeners()}},"{document} pagehide":function(b){this.removeCSS(b.event.target.id)},"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var e=s();null===e||-1!==b.inArray(c,i[e])||(F[e]||(F[e]=[]),F[e].push(c))}},"{rootElement} h5controllerunbound":function(c){var e=
c.evArg,c=s();null!==c&&(e=b.inArray(e,F[c]),-1!==e&&F[c].splice(e,1))},loadScript:function(c){var c=b("#"+c),h=b.trim(c.data(this.getDataAttribute("script")));if(0!==h.length)return h=b.map(h.split(","),function(a){return b.trim(a)}),c=!0==c.data(this.getDataAttribute("async")),e.u.loadScript(h,{async:c})},getDataAttribute:function(b){var c=e.ui.jqm.dataPrefix;null==c&&(c="h5");return 0!==c.length?c+"-"+b:b},bindController:function(b){var c=v[b],a=E[b];if(c&&0!==c.length){i[b]||(i[b]=[]);for(var h=
i[b],l=0,n=c.length;l<n;l++){for(var d=c[l],j=!1,u=0,s=h.length;u<s;u++){var z=h[u];if(z&&z.__name===d.__name){j=!0;break}}j||i[b].push(e.core.controller("#"+b,d,a[l]))}}},addCSS:function(c){if(c=B[c])for(var e=document.getElementsByTagName("head")[0],a=e.getElementsByTagName("link"),h=a.length,i=0,n=c.length;i<n;i++){for(var d=b.mobile.path.parseUrl(c[i]).filename,j=!1,u=0;u<h;u++)if(b.mobile.path.parseUrl(a[u].href).filename===d){j=!0;break}j||(d=document.createElement("link"),d.type="text/css",
d.rel="stylesheet",d.href=c[i],e.appendChild(d))}},removeCSS:function(c){var e=B[c];if(e&&(c=s(),null!==c)){var a=B[c];b("link").filter(function(){var c=b(this).attr("href");return-1!==b.inArray(c,e)&&-1===b.inArray(c,a)}).remove()}}};e.u.obj.expose("h5.ui.jqm.manager",{init:function(){h||(h=!0,b(function(){n=cb.controllerInternal("body",A,null,{managed:!1});z()}))},define:function(e,h,a,i){x(e)||c(12E3,"id");null!=h&&!x(h)&&!b.isArray(h)&&c(12E3,"cssSrc");null!=a&&((x(a)||b.isArray(a))&&c(12001),
(!b.isPlainObject(a)||!("__name"in a))&&c(12E3,"controllerDefObject"),null!=i&&!b.isPlainObject(i)&&c(12E3,"initParam"));B[e]||(B[e]=[]);v[e]||(v[e]=[]);E[e]||(E[e]=[]);b.merge(B[e],b.map(b.makeArray(h),function(a){return b.inArray(a,B[e])!==-1?null:a}));a&&-1===b.inArray(a,v[e])&&(v[e].push(a),E[e].push(i));null!==s()&&n?z():this.init()}})})();(function(){function s(){v||(v=navigator.geolocation);return v}function z(b,c){this.oblateness=b;this.semiMajorAxis=c}function n(){}var v=null,i=e.env.ua;
z.prototype.getOblateness=function(){return this.oblateness};z.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var x=new z(298.257222,6378137),E=new z(299.152813,6377397.155),B=Math.PI/180;b.extend(n.prototype,{isSupported:i.isIE&&9<=i.browserVersion?!0:!!s(),getCurrentPosition:function(b){var c=e.async.deferred();s().getCurrentPosition(function(b){c.resolve(b)},function(b){c.reject(da(2002,null,b))},b);return c.promise()},watchPosition:function(b){function c(){}var f=e.async.deferred(),
i=s().watchPosition(function(a){f.notify(a)},function(a){s().clearWatch(i);f.reject(da(2002,null,a))},b);c.prototype.unwatch=function(){s().clearWatch(i);f.resolve()};return f.promise(new c)},getDistance:function(b,e,f,i,a){(!isFinite(b)||!isFinite(e)||!isFinite(f)||!isFinite(i))&&c(2E3);var n=a?a:x;n instanceof z||c(2001);var a=n.getSemiMajorAxis(),l=n.getOblateness(),b=b*B,e=e*B,f=f*B,n=i*B,i=(b+f)/2,l=Math.sqrt(2*l-1)/l,l=Math.pow(l,2),s=Math.sqrt(1-l*Math.pow(Math.sin(i),2)),l=a*(1-l)/Math.pow(s,
3),a=a/s,e=e-n;return Math.sqrt(Math.pow(l*(b-f),2)+Math.pow(a*Math.cos(i)*e,2))},GS_GRS80:x,GS_BESSEL:E});e.u.obj.expose("h5.api",{geo:new n})})();(function(){function s(a){if(a){var b=a.deferred;(wa(b)||xa(b)||!a.result)&&c(p)}}function z(d,e,f){if(b.isPlainObject(d))for(var h in d){var i=b.trim(h).replace(/ +/g," ").split(" "),l=[];""===i[0]?c(r):1===i.length?(l.push(i[0]),l.push("="),l.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(i[1])?3===i.length&&/^like$/i.test(i[1])?(l.push(i[0]),l.push(i[1]),
l.push("?"),l.push("ESCAPE"),l.push('"'+i[2]+'"')):(l.push(i[0]),l.push(i[1]),l.push("?")):c(a);e.push(l.join(" "));f.push(d[h])}}function n(){}function v(){this._multiple=!1}function i(a){this._db=a;this._df=l();this._tx=null;this._tasks=[];this._queue=[]}function F(a,c,e){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=b.isArray(e)?e.join(", "):"*";this._orderBy=this._where=null}function E(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=
b;this._values=c?J(c):[];this._df=l();this._multiple=!0}function B(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function h(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function A(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function f(a){this._db=a}var p=3E3,a=3003,r=3011,l=e.async.deferred,K=e.u.str.format;
b.extend(v.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});b.extend(i.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof v||c(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===
f.length){var i=a(h);c._setResult.apply(c,[i]);e.notify(i,c)}else{for(var n=f.shift(),p=n._statements,r=n._parameters,s=l().resolve().promise(),i=[],t=0,v=p.length;t<v;t++)(function(a,b){s=s.then(function(){var d=l();c._tx.executeSql(a,b,function(a,b){i.push(n._onComplete(b));d.resolve()});return d.promise()})})(p[t],r[t]);s.then(function(){h.push(n._multiple?i:i[0]);b()})}}var c=this,e=this._df,f=this._queue,h=[];try{s(this._getRecentTask());this._addTask(e);for(var i=0,n=f.length;i<n;i++)f[i]._buildStatementAndParameters();
this._runTransaction()?b():this._db.transaction(function(a){c._tx=a;b()},function(a){c._tx=null;for(var b=c._tasks,d=b.length-1;0<=d;d--)b[d].deferred.reject(da(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){c._tx=null;for(var a=c._tasks,b=a.length-1;0<=b;b--){var d=a[b];d.deferred.resolve(d.result)}})}catch(p){e.reject(p)}this._df=l();return e.promise()},execute:function(){return this._execute(function(){})},promise:function(){return this._df.promise()}});F.prototype=new v;b.extend(F.prototype,
{where:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Select","where"]);this._where=a;return this},orderBy:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Select","orderBy"]);this._orderBy=J(a);return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=K("SELECT {0} FROM {1}",this._columns,this._tableName);if(b.isPlainObject(c)){var e=[];z(c,e,this._parameters);a+=" WHERE "+e.join(" AND ")}else x(c)&&(a+=" WHERE "+c);b.isArray(this._orderBy)&&(a+=" ORDER BY "+this._orderBy.join(", "));
this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});E.prototype=new v;b.extend(E.prototype,{_buildStatementAndParameters:function(){var a=this._values,c=this._statements,e=this._parameters;if(0===a.length)c.push(K("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else for(var f=0,h=a.length;f<h;f++){var i=a[f];if(null==i)c.push(K("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else if(b.isPlainObject(i)){var l=[],n=[],
p=[],r;for(r in i)l.push("?"),n.push(r),p.push(i[r]);c.push(K("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,n.join(", "),l.join(", ")));e.push(p)}}},_onComplete:function(a){return a.insertId}});B.prototype=new v;b.extend(B.prototype,{where:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Update","where"]);this._where=a;return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=this._values,e=[],f;for(f in a)e.push(f+" = ?"),this._parameters.push(a[f]);a=K("UPDATE {0} SET {1}",
this._tableName,e.join(", "));b.isPlainObject(c)?(f=[],z(c,f,this._parameters),a+=" WHERE "+f.join(" AND ")):x(c)&&(a+=" WHERE "+c);this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});h.prototype=new v;b.extend(h.prototype,{where:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Del","where"]);this._where=a;return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=K("DELETE FROM {0}",this._tableName);if(b.isPlainObject(c)){var e=
[];z(c,e,this._parameters);a+=" WHERE "+e.join(" AND ")}else x(c)&&(a+=" WHERE "+c);this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});A.prototype=new v;b.extend(A.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});b.extend(f.prototype,{select:function(a,e,f){x(a)||c(3001,"select");!b.isArray(e)&&"*"!==e&&c(3005,"select");return new F(this.transaction(f),a,e)},insert:function(a,e,f){x(a)||c(3001,"insert");
null!=e&&!b.isArray(e)&&!b.isPlainObject(e)&&c(3006,"insert");return new E(this.transaction(f),a,e)},update:function(a,e,f){x(a)||c(3001,"update");b.isPlainObject(e)||c(3006,"update");return new B(this.transaction(f),a,e)},del:function(a,b){x(a)||c(3001,"del");return new h(this.transaction(b),a)},sql:function(a,e,f){x(a)||c(3007,"sql");null!=e&&!b.isArray(e)&&c(3008,"sql");return new A(this.transaction(f),a,e)},transaction:function(a){void 0!=a&&!(a instanceof i)&&c(3002,"transaction");return a?a:
new i(this._db)}});b.extend(n.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,e){if(this.isSupported)return a=openDatabase(a,b,c,e),new f(a)}});e.u.obj.expose("h5.api",{sqldb:new n})})();(function(){function c(b){this._storage=b}b.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(b){return this._storage.key(b)},getItem:function(b){b=this._storage.getItem(b);return null===b?null:e.u.obj.deserialize(b)},setItem:function(b,c){this._storage.setItem(b,
e.u.obj.serialize(c))},removeItem:function(b){this._storage.removeItem(b)},clear:function(){this._storage.clear()},each:function(b){for(var c=this._storage,e=0,i=c.length;e<i;e++){var s=c.key(e);b(e,s,this.getItem(s))}}});e.u.obj.expose("h5.api.storage",{isSupported:!!window.localStorage,local:new c(window.localStorage),session:new c(window.sessionStorage)})})()})(jQuery);